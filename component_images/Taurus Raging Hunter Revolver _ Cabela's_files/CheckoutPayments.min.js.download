if(dojo.require("dojox.validate.creditCard"),null==CheckoutPayments||"object"!=typeof CheckoutPayments)var CheckoutPayments=new Object;CheckoutPayments={errorMessages:{},numberOfPaymentMethods:1,langId:"-1",storeId:"",catalogId:"",dirtyFlag:!1,dojolocale:"",maxNumberOfPaymentMethodsSupported:1,paymentObjects:new Array,paymentsToDelete:new Array,paymentsToAdd:new Array,paymentsToUpdate:new Array,guestPaymentData:new Array,prevNumberOfPaymentMethods:1,purchaseOrderNumber:"",paymentSpecificAddress:!1,quickCheckoutProfileForPaymentFlag:!1,currentPaymentMethodChanged:1,saveCardVCNFlag:"false",setLocale:function(e){this.dojolocale=e},setQuickCheckoutProfileForPaymentFlag:function(e){this.quickCheckoutProfileForPaymentFlag=e},setErrorMessage:function(e,t){this.errorMessages[e]=t},setCommonParameters:function(e,t,a){this.langId=e,this.storeId=t,this.catalogId=a},setNumPaymentIndicator:function(e){if(document.getElementById("paymentSection2"))if("block"==document.getElementById("paymentSection2").style.display)for(i=1;i<e;i++){document.getElementById("paymentHeading"+i).style.display="block"}else document.getElementById("paymentHeading1").style.display="none"},setNumberOfPaymentMethods:function(e,t,a){for(this.numberOfPaymentMethods=t.value,i=1;i<=e;i++){var o=document.getElementById(a+i);void 0!=o&&(i<=t.value?o.style.display="block":o.style.display="none")}var d=document.getElementById("OrderTotalAmount").value;this.updateAmountFields(d),this.setNumPaymentIndicator(t.value)},clearPaymentFormData:function(e){" "!==this.getValue(e,"cc_brand")&&(e.cc_brand.value=" ")," "!==this.getValue(e,"cc_cvc")&&(e.cc_cvc.value=" ")," "!==this.getValue(e,"account")&&(e.account.value=" ")," "!==this.getValue(e,"expire_month")&&(e.expire_month.value=" ")," "!==this.getValue(e,"expire_year")&&(e.expire_year.value=" ")," "!==this.getValue(e,"check_routing_number")&&(e.check_routing_number.value=" ")," "!==this.getValue(e,"checkingAccountNumber")&&(e.checkingAccountNumber.value=" ")," "!==this.getValue(e,"checkRoutingNumber")&&(e.checkRoutingNumber.value=" ")," "!==this.getValue(e,"numberOfInstallments")&&(e.numberOfInstallments.value=" ")},loadPaymentSnippet:function(e,t){var a=document.forms["PaymentForm"+t];0!=dojo.query('input#MasterPass[checked="checked"][type="radio"]').length&&"MasterPass"==dojo.byId("payMethodIdText_1").value||this.clearPaymentFormData(a);var o=e.value.split("_"),d=o[0],r="";if(null!=o[1]&&(r=o[1]),this.paymentSpecificAddress&&(wc.render.getContextById("billingAddressDropDownBoxContext").properties["payment"+t]=d,wc.render.getContextById("billingAddressDropDownBoxContext").properties["paymentTCId"+t]=r,wc.render.updateContext("billingAddressDropDownBoxContext")),MessageHelper.hideAndClearMessage(),CheckoutHelperJS.isAjaxCheckOut()){for(var n=0,l=1;l<t;l++){var s=document.forms["PaymentForm"+l];null==s.piAmount||""==s.piAmount.value||isNaN(s.piAmount.value)||(n=1*n+1*s.piAmount.value)}var i="payment"+t,u=a.buyerOrgDN.value,c=a.orderId.value,m=document.getElementById("BPS_piAmount_remaining").value,y={};y[i]=d,y["paymentTCId"+t]=r,y.currentPaymentArea=t,y.payMethodId=d,y.currentTotal=n,y.paymentTCId=r,y.buyerOrgDN=u,y.orderId=c,y.piAmount=m,wc.render.updateContext("paymentContext",y);var p=document.forms["PaymentForm"+t];if("PayInStore"==d)document.getElementById("billingAddressSelectBoxArea_"+t).style.display="none",p.billing_address_id&&(p.billing_address_id.value="");else document.getElementById("billingAddressSelectBoxArea_"+t).style.display="block",""==p.billing_address_id&&(p.billing_address_id.value="-1")}else this.loadPaymentSnippetLocally(e,t)},loadPaymentSnippetLocally:function(e,t){var a=e.value.split("_"),o=a[0],d="",r="",n="",l=document.forms["PaymentForm"+t];if(null==l.piAmount||""==l.piAmount.value||isNaN(l.piAmount.value)||(r=l.piAmount.value),null==l.piAmount_display||""==l.piAmount_display.value||isNaN(l.piAmount_display.value)||(n=l.piAmount_display.value),null!=a[1]){var s=a[1];d=dojo.byId("PIInfo_Div_"+o+"_"+t+"_"+s).innerHTML}else d=dojo.byId("PIInfo_Div_"+o+"_"+t).innerHTML;document.getElementById("paymentFormDiv"+t).innerHTML=d,""!=r&&(l.piAmount.value=r),""!=n&&(l.piAmount_display.value=n);var i=document.getElementById("OrderTotalAmount").value;this.updateAmountFields(i)},processCheckout:function(e,t){if(cursor_clear(),dojo.byId("sezzleErroKey")&&null!=dojo.byId("sezzleErroKey").value&&""!=dojo.byId("sezzleErroKey").value&&(dojo.byId("sezzleErroKey").value=""),dojo.byId("sezzleErroMessage")&&null!=dojo.byId("sezzleErroMessage").value&&""!=dojo.byId("sezzleErroMessage").value&&(dojo.byId("sezzleErroMessage").value=""),dojo.byId("retrunFromSezzle")&&null!=dojo.byId("retrunFromSezzle").value&&""!=dojo.byId("retrunFromSezzle").value&&(dojo.byId("retrunFromSezzle").value=""),dojo.byId("SZ")&&1==dojo.byId("SZ").checked?CheckoutPayments.updatePaymentObject(1,""):dojo.byId("PP")&&1==dojo.byId("PP").checked||document.getElementById("masterPassPaymentExists")&&"true"==document.getElementById("masterPassPaymentExists").value||dojo.byId("CC")&&1==dojo.byId("CC").checked&&dojo.byId("BPS_OPC_CC_Read_Only_Section_1")&&""==dojo.byId("BPS_OPC_CC_Read_Only_Section_1").style.display||CheckoutPayments.updatePaymentObject(1,"account"),dojo.byId("BPS_Add_CC_Error").innerHTML="",document.getElementById("paymentArea1").scrollIntoView({behavior:"smooth",block:"center"}),"0.00"==document.getElementById("BPS_piAmount_remaining").value||this.checkValidPaymentInstructions(e)){if(void 0!=t&&null!=t||(t=!1),!CheckoutHelperJS.checkForDirtyFlag()){var a=new Date;if("1"==CheckoutHelperJS.getShipmentTypeId()){if(null!=document.getElementById("requestShippingDateCheckbox")){var o=dijit.byId("requestedShippingDate");if(dojo.byId("requestShippingDateCheckbox").checked&&(o.compare(o.getValue(),a)<=0||void 0==o.getValue()))return void(null!=document.getElementById("requestedShippingDate")?MessageHelper.formErrorHandleClient(document.getElementById("requestedShippingDate").id,MessageHelper.messages.REQUESTED_SHIPPING_DATE_OUT_OF_RANGE_ERROR):MessageHelper.displayErrorMessage(MessageHelper.messages.REQUESTED_SHIPPING_DATE_OUT_OF_RANGE_ERROR))}}else{var d=document.getElementById("totalNumberOfItems");if(null!=d)for(var r=0;r<d.value;r++){var n=document.getElementById("orderItem_"+(r+1));if(null!=n){var l=n.value,s=dojo.byId("MS_requestShippingDateCheckbox_"+l);if(null!=s){o=dijit.byId("MS_requestedShippingDate_"+l);if(s.checked&&(o.compare(o.getValue(),a)<=0||void 0==o.getValue()))return void(null!=document.getElementById("MS_requestedShippingDate_"+l)?MessageHelper.formErrorHandleClient(document.getElementById("MS_requestedShippingDate_"+l).id,MessageHelper.messages.REQUESTED_SHIPPING_DATE_OUT_OF_RANGE_ERROR):MessageHelper.displayErrorMessage(MessageHelper.messages.REQUESTED_SHIPPING_DATE_OUT_OF_RANGE_ERROR))}}}}if(null!=document.getElementById("scheduleOrderInputSection")){var i=document.getElementById("ScheduleOrderFrequency"),u=dijit.byId("ScheduleOrderStartDate"),c=document.getElementById("makeRecurringOrderMandatory");if("undefined"==i.value&&null!=u.getValue()||c&&"true"==c.value&&"undefined"==i.value)return void MessageHelper.formErrorHandleClient(i.id,MessageHelper.messages.SCHEDULE_ORDER_MISSING_FREQUENCY);if("undefined"!=i.value&&null==u.getValue())return void MessageHelper.formErrorHandleClient(u.id,MessageHelper.messages.SCHEDULE_ORDER_MISSING_START_DATE);if(!CheckoutHelperJS.validateDate(u,"ScheduleOrderStartDate"))return}if(!t&&!CheckoutHelperJS.isSinglePageCheckout()){if((m=[]).storeId=this.storeId,m.catalogId=this.catalogId,m.langId=this.langId,m.orderId=".",!submitRequest())return;return cursor_wait(),void wc.service.invoke("AjaxPrepareOrderBeforePaymentCapture",m)}if(t)this.processPIAndCheckout(e,t);else{var m;if((m=[]).storeId=this.storeId,m.catalogId=this.catalogId,m.langId=this.langId,!submitRequest())return;cursor_wait(),wc.service.invoke("AjaxPrepareOrderBeforeSubmit",m)}}}else event.preventDefault()},processPIAndCheckout:function(e,t){void 0==t||null==t?t=!1:"true"!=t&&"false"!=t||(t="true"===t);var a=document.forms[e+"1"];("Y"==this.getValue(a,"valueFromProfileOrder")&&(this.setQuickCheckoutProfileForPaymentFlag("true"),this.updatePaymentObject(1,"account")),document.getElementById("MasterPass")&&document.getElementById("MasterPass").checked)&&("re-add"==(r=this.retrievePaymentObject(1)).action&&(r.action="update"));for(var o=parseInt(this.maxNumberOfPaymentMethodsSupported),d=1;d<=o;d++){var r;null!=(r=this.retrievePaymentObject(d))&&("delete"!=r.action&&"re-add"!=r.action||""==r.piId||this.setPaymentsToDelete(d),"add"!=r.action&&"re-add"!=r.action||this.setPaymentsToAdd(d),"update"==r.action&&""!=r.piId&&this.setPaymentsToUpdate(d))}var n=0==parseFloat(dojo.byId("BPS_piAmount_remaining").value);!n&&this.getPaymentsToDelete().length>0?this.deletePaymentInstructions():!n&&this.getPaymentsToAdd().length>0?this.addPaymentInstructions(!0):this.getPaymentsToUpdate().length>0?this.updatePaymentInstructions():(CheckoutPayments.setCommonParameters(SBServicesDeclarationJS.langId,SBServicesDeclarationJS.storeId,SBServicesDeclarationJS.catalogId),CheckoutPayments.showSummaryPage(),cursor_clear()),CheckoutHelperJS.setFieldDirtyFlag(!1)},toggleReviewOrderButton:function(e){var t="",a=dojo.byId("BPS_OPC_Walet_Form");byId("paymentform")&&(t=byId("paymentform").value);var o="0.00"==document.getElementById("BPS_piAmount_remaining").value;if("true"!=t||o||!dojo.byId("shippingBillingPageNext")||!dojo.byId("CC")||1!=dojo.byId("CC").checked||dojo.byId("PP")&&1==dojo.byId("PP").checked||dojo.byId("SZ")&&1==dojo.byId("SZ").checked){if(dojo.byId("shippingBillingPageNext")&&(byId("shippingBillingPageNext").classList.remove("not-active"),o&&dojo.byId("BPS_OPC_Wallet_CVV")&&null!=dojo.byId("BPS_OPC_Wallet_CVV").value&&0==dojo.byId("BPS_OPC_Wallet_CVV").value.trim().length)){var d=CheckoutPayments.isClubCardselected();if(null!=d&&d.length>0){var r=d.toLowerCase();(r.indexOf("club")>0||r.includes("club"))&&null!=dojo.byId("clubCardCvvMsg")&&void 0!=dojo.byId("clubCardCvvMsg")&&(dojo.byId("clubCardCvvMsg").style.display="block")}}}else{for(var n=1;n<=this.numberOfPaymentMethods;n++){var l=0;if((a&&"none"==a.style.display||null==a)&&null!=document.getElementById("account1_"+n)&&void 0!=document.getElementById("account1_"+n)&&""==document.getElementById("account1_"+n).value&&(l+=1),(a&&"none"==a.style.display||null==a)&&void 0!=document.getElementById("expire_month_"+n)&&null!=document.getElementById("expire_month_"+n)&&("month"!=document.getElementById("expire_month_"+n).value&&"year"!=document.getElementById("expire_year_"+n).value||(l+=1),""==document.getElementById("cc_cvc_1").value&&(l+=1)),dojo.byId("BPS_OPC_Wallet_Select")&&a&&"none"!=a.style.display){var s;(s=dojo.byId("BPS_OPC_Wallet_Select")).options[s.selectedIndex].getAttribute("data-cc-brand"),dojo.byId("BPS_OPC_Wallet_CVV");dojo.byId("BPS_OPC_Wallet_CVV")&&null!=dojo.byId("BPS_OPC_Wallet_CVV").value&&0==dojo.byId("BPS_OPC_Wallet_CVV").value.trim().length&&(l+=1)}}l>0?byId("shippingBillingPageNext").classList.add("not-active"):byId("shippingBillingPageNext").classList.remove("not-active")}if(byId("BPS_OPC_Wallet_Select")&&null!=(s=byId("BPS_OPC_Wallet_Select")).options[s.selectedIndex].getAttribute("data-x_field1")){var i=s.options[s.selectedIndex].getAttribute("data-x_field1").split("");if(i.length>=3&&byId("BPS_OPC_Walet_Form")&&(0==i[1]||1==i[1])&&byId("icGP")&&""!=byId("icGP").value&&null!=s.options[s.selectedIndex].getAttribute("data-cd")){var u=new Date(s.options[s.selectedIndex].getAttribute("data-cd").split("-").join("/")),c=new Date;c.setHours(0,0,0,0),c<new Date(u.getTime()+864e5*byId("icGP").value)||(0==i[2]||1==i[2])&&byId("sflt")&&""!=byId("sflt").value&&"TRUE"==byId("sflt").value.toUpperCase()?byId("shippingBillingPageNext")&&(1==i[0]&&1==i[1]&&1==i[2]?o?byId("shippingBillingPageNext").classList.remove("not-active"):dojo.byId("BPS_OPC_Wallet_CVV")&&""!=dojo.byId("BPS_OPC_Wallet_CVV").value?byId("shippingBillingPageNext").classList.remove("not-active"):byId("shippingBillingPageNext").classList.add("not-active"):(1==i[0]&&1==i[1]&&0==i[2]&&byId("sflt")&&""!=byId("sflt").value&&"TRUE"==byId("sflt").value.toUpperCase()&&byId("shippingBillingPageNext").classList.remove("not-active"),1==i[0]&&1==i[1]&&0==i[2]&&byId("sflt")&&""!=byId("sflt").value&&"FALSE"==byId("sflt").value.toUpperCase()&&(o?byId("shippingBillingPageNext").classList.remove("not-active"):dojo.byId("BPS_OPC_Wallet_CVV")&&""!=dojo.byId("BPS_OPC_Wallet_CVV").value?byId("shippingBillingPageNext").classList.remove("not-active"):byId("shippingBillingPageNext").classList.add("not-active")),1==i[0]&&1==i[1]&&1==i[2]&&byId("sflt")&&""!=byId("sflt").value&&"FALSE"==byId("sflt").value.toUpperCase()&&(o?byId("shippingBillingPageNext").classList.remove("not-active"):dojo.byId("BPS_OPC_Wallet_CVV")&&""!=dojo.byId("BPS_OPC_Wallet_CVV").value?byId("shippingBillingPageNext").classList.remove("not-active"):byId("shippingBillingPageNext").classList.add("not-active")),(1==i[0]&&0==i[1]&&(0==i[2]||1==i[2])&&byId("sflt")&&""!=byId("sflt").value&&"FALSE"==byId("sflt").value.toUpperCase()||o)&&byId("shippingBillingPageNext").classList.remove("not-active"),(1==i[0]&&0==i[1]&&(0==i[2]||1==i[2])&&byId("sflt")&&""!=byId("sflt").value&&"TRUE"==byId("sflt").value.toUpperCase()||o)&&byId("shippingBillingPageNext").classList.remove("not-active"))):(1==i[0]&&1==i[1]&&0==i[2]&&byId("sflt")&&""!=byId("sflt").value&&"TRUE"==byId("sflt").value.toUpperCase()&&byId("shippingBillingPageNext").classList.remove("not-active"),1==i[0]&&1==i[1]&&0==i[2]&&byId("sflt")&&""!=byId("sflt").value&&"FALSE"==byId("sflt").value.toUpperCase()&&(o?byId("shippingBillingPageNext").classList.remove("not-active"):dojo.byId("BPS_OPC_Wallet_CVV")&&""!=dojo.byId("BPS_OPC_Wallet_CVV").value?byId("shippingBillingPageNext").classList.remove("not-active"):byId("shippingBillingPageNext").classList.add("not-active")),1==i[0]&&1==i[1]&&1==i[2]&&byId("sflt")&&""!=byId("sflt").value&&"FALSE"==byId("sflt").value.toUpperCase()&&(o?byId("shippingBillingPageNext").classList.remove("not-active"):dojo.byId("BPS_OPC_Wallet_CVV")&&""!=dojo.byId("BPS_OPC_Wallet_CVV").value?byId("shippingBillingPageNext").classList.remove("not-active"):byId("shippingBillingPageNext").classList.add("not-active")))}}},showSummaryPage:function(){BPSCheckoutHelperJS.isSummaryPage=!0,null!=document.getElementById("scheduleOrderInputSection")&&CheckoutHelperJS.prepareOrderSchedule(),dojo.byId("BPS_OPC_CHECKOUT_ORDER_BUTTONS").style.display="",dojo.byId("BPS_OPC_CHECKOUT_ORDER_BUTTONS_TOP").style.display="",dojo.byId("isAmmo")&&"true"==dojo.byId("isAmmo").value&&(dojo.byId("legalCheck")&&dojo.byId("legalCheck").checked?(dojo.byId("singleOrderSummary")&&(document.getElementById("singleOrderSummary").disabled=!1,document.getElementById("singleOrderSummary").style.pointerEvents="auto",dojo.style("singleOrderSummary","backgroundColor","#213629")),dojo.byId("singleOrderSummaryTop")&&(document.getElementById("singleOrderSummaryTop").disabled=!1,document.getElementById("singleOrderSummaryTop").style.pointerEvents="auto",dojo.style("singleOrderSummaryTop","backgroundColor","#213629"))):(dojo.byId("singleOrderSummary")&&(document.getElementById("singleOrderSummary").disabled=!0,document.getElementById("singleOrderSummary").style.pointerEvents="none",dojo.style("singleOrderSummary","backgroundColor","#e5e5e5")),dojo.byId("singleOrderSummaryTop")&&(document.getElementById("singleOrderSummaryTop").disabled=!0,document.getElementById("singleOrderSummaryTop").style.pointerEvents="none",dojo.style("singleOrderSummaryTop","backgroundColor","#e5e5e5")))),BPSCheckoutHelperJS.shippingAddressExpanded.hide(),BPSCheckoutHelperJS.shippingAddressCollapsed.show(),BPSCheckoutHelperJS.shippingOptionColapsed.show(),BPSCheckoutHelperJS.shippingOptionExpanded.hide(),BPSCheckoutHelperJS.paymentOptionsCollapsed.show(),BPSCheckoutHelperJS.paymentOptionsExpanded.hide(),dojo.addClass(dojo.byId("bps_opc_main_div"),"page_review_order"),dojo.byId("orderTotalM").innerHTML=dojo.byId("BPS_OPC_ORDER_GRAND_TOTAL").innerHTML,dojo.byId("editOPCAllPaymentOptions")&&(dojo.byId("editOPCAllPaymentOptions").style.display=""),dojo.byId("editOPCShippingOptions")&&byId("editOPCShippingOptions").style.setProperty("display","","important")},showBillingPage:function(){document.location.href=appendWcCommonRequestParameters("OrderBillingView?langId="+this.langId+"&storeId="+this.storeId+"&catalogId="+this.catalogId+"&forceShipmentType="+CheckoutHelperJS.getShipmentTypeId())},populateProtocolData:function(e,t){return t=this.updateParamObject(t,"storeId",this.getValue(e,"storeId"),!0),t=this.updateParamObject(t,"catalogId",this.getValue(e,"catalogId"),!0),t=this.updateParamObject(t,"langId",this.getValue(e,"langId"),!0),t=this.updateParamObject(t,"valueFromProfileOrder",this.getValue(e,"valueFromProfileOrder"),!0),t=this.updateParamObject(t,"valueFromPaymentTC",this.getValue(e,"valueFromPaymentTC"),!0),t=this.updateParamObject(t,"paymentTCId",this.getValue(e,"paymentTCId"),!0),t=this.updateParamObject(t,"payMethodId",this.getPaypalValue(e,"payMethodId"),!0),t=this.updateParamObject(t,"piAmount",this.getValue(e,"piAmount"),!0),t=this.updateParamObject(t,"billing_address_id",this.getValue(e,"billing_address_id"),!0),t=this.updateParamObject(t,"cc_brand",this.getValue(e,"cc_brand"),!0),t=this.updateParamObject(t,"cc_cvc",this.getValue(e,"cc_cvc"),!0),"undefined"!=typeof isBrazilStore&&isBrazilStore&&(t=this.updateParamObject(t,"CPFNumber",this.getValue(e,"CPFNumber"),!0),t=this.updateParamObject(t,"installmentOption",this.getSelected(e,"numberOfInstallments"),!0),t=this.updateParamObject(t,"numberOfInstallments",this.getValue(e,"numberOfInstallments"),!0)),t=this.updateParamObject(t,"account",this.getValue(e,"account"),!0),t=this.updateParamObject(t,"expire_month",this.getValue(e,"expire_month"),!0),t=this.updateParamObject(t,"expire_year",this.getValue(e,"expire_year"),!0),t=this.updateParamObject(t,"check_routing_number",this.getValue(e,"check_routing_number"),!0),t=this.updateParamObject(t,"checkingAccountNumber",this.getValue(e,"checkingAccountNumber"),!0),t=this.updateParamObject(t,"checkRoutingNumber",this.getValue(e,"checkRoutingNumber"),!0),t=this.updateParamObject(t,"requesttype","ajax",!0),e.authToken&&(t=this.updateParamObject(t,"authToken",this.getValue(e,"authToken"),!0)),t=this.updateParamObject(t,"PayPalEmailId",this.getValue(e,"PayPalEmail"),!0),t=this.updateParamObject(t,"PayPalToken",this.getValue(e,"PayPalToken"),!0),t=this.updateParamObject(t,"PayPalPayerId",this.getValue(e,"PayPalPayerId"),!0),t=this.updateParamObject(t,"PaymentType",this.getValue(e,"PaymentType"),!0),t=this.updateParamObject(t,"BillingAgreement",this.getValue(e,"BillingAgreement"),!0)},populateProtocolDataForGivenFields:function(e,t,a){for(var o=0;o<a.length;o++){var d=a[o];t="payMethodId"==d?this.updateParamObject(t,d,this.getPaypalValue(e,d),!0):this.updateParamObject(t,d,this.getValue(e,d),!0)}return t=this.updateParamObject(t,"requesttype","ajax",!0)},getSelected:function(e,t){if(null!=e[t]){var a=e[t],o=a.selectedIndex;return-1!==o?a.options[o].text:""}return""},getValue:function(e,t){return null!=e[t]?e[t].value:" "},getPaypalValue:function(e,t){return null!=e[t]?2==e[t].length?e[t][0].value:e[t].value:" "},trim:function(e){word=e.toString();for(var t=0,a=word.length-1;" "==word.charAt(t);)t++;for(;" "==word.charAt(a);)a-=1;return t>a?word.substring(t,t):word.substring(t,a+1)},isNumber:function(e){e=this.trim(e);for(var t=0;t<e.length;t++)if(-1=="0123456789".indexOf(e.charAt(t)))return!1;return!0},formatAmountDisplayForLocale:function(e){var t=document.getElementById("piAmount_"+e),a=document.getElementById("piAmount_"+e+"_display");if("ar-eg"==dojo.locale)var o=dojo.number.round(t.value,2);else if(0===this.dojolocale.indexOf("zh")||0===this.dojolocale.indexOf("ja")||0===this.dojolocale.indexOf("ko"))o=dojo.number.format(t.value,{locale:this.dojolocale});else o=dojo.currency.format(t.value,{locale:this.dojolocale});a.value==o&&"ar-eg"!=dojo.locale||(a.value=o)},validateAmount:function(e,t){return!0},validatePaymentTotals:function(e){return!0},isBillingAddressValid:function(e){for(var t=1;t<=this.numberOfPaymentMethods;t++){var a=document.forms[e+t].billing_address_isValid;if(a&&"false"==a.value)return!1}return!0},checkValidPaymentInstructions:function(e){dojo.byId("BPS_Add_CC_Error");document.getElementById("bp-alert-error")&&bpAlerts.destroyAlert(document.getElementById("bp-alert-error"));for(var t=1;t<=this.numberOfPaymentMethods;t++){document.getElementById("bp-alert-error")&&bpAlerts.destroyAlert(document.getElementById("bp-alert-error"));var a=document.forms[e+t],o=" ";if(null==a["mandatoryFields_"+t]||dojo.byId("PP")&&1==dojo.byId("PP").checked)return!0;if(o=a["mandatoryFields_"+t].value,null==a["mandatoryFields_"+t]||dojo.byId("SZ")&&1==dojo.byId("SZ").checked)return!0;if(o=a["mandatoryFields_"+t].value,dojo.byId("valueFromProfileOrder")&&dojo.byId("quick_checkout_cvv")&&0==dojo.byId("cc_cvc_"+t).value.trim().length){var d=dojo.byId("quick_checkout_cvv").title;if(0==dojo.byId("quick_checkout_cvv").value.trim().length){var r=this.errorMessages.EDPPaymentMethods_CVV_NOT_EMPTY.replace("{0}",d);return bpAlerts.createAlert("","BPS_Add_CC_Error","after","error","",r),!1}if(!this.isNumber(dojo.byId("quick_checkout_cvv").value)){r=this.errorMessages.EDPPaymentMethods_CVV_NOT_NUMERIC.replace("{0}",d);return bpAlerts.createAlert("","BPS_Add_CC_Error","after","error","",r),!1}if("AMEX"===dojo.byId("payMethodIdText_1").value&&document.getElementById("quick_checkout_cvv").value.trim().length<4||document.getElementById("quick_checkout_cvv").value.trim().length<3){r=this.errorMessages.BPSEDPPaymentMethods_CVV_NOT_VALID;return bpAlerts.createAlert("","BPS_Add_CC_Error","after","error","",r),!1}if(dojo.byId("BPS_ENABLE_INSTALLMENT_PAY")&&dojo.byId("BPS_ENABLE_INSTALLMENT_PAY").checked&&"AMEX"===dojo.byId("payMethodIdText_1").value){var n=this.errorMessages.BPSEDPPaymentMethods_AMEX_NOT_ALLOWED_MULTIPAY;return bpAlerts.createAlert("","BPS_Add_CC_Error","after","error","",n),!1}return!0}var l=dojo.byId("BPS_OPC_Wallet_Select"),s=dojo.byId("BPS_OPC_Walet_Form"),i=null;if(s&&(i=s.parentNode),l&&"-1"!=l.value&&s&&"none"!=s.style.display&&i&&"none"!=i.style.display&&!dojo.byId("masterPassPaymentExists")){var u=l.options[l.selectedIndex].getAttribute("data-cc-brand");if(dojo.byId("BPS_ENABLE_INSTALLMENT_PAY")&&dojo.byId("BPS_ENABLE_INSTALLMENT_PAY").checked&&"string"==typeof u&&u.length>0&&"AMEX"===u.toUpperCase()){var c=this.errorMessages.BPSEDPPaymentMethods_AMEX_NOT_ALLOWED_MULTIPAY;return bpAlerts.createAlert("","BPS_Add_CC_Error","after","error","",c),!1}var m=dojo.byId("BPS_OPC_Wallet_CVV"),y=dojo.byId("BPS_OPC_Wallet_CVV").title;if(0==m.value.trim().length){var p=this.errorMessages.EDPPaymentMethods_CVV_NOT_EMPTY.replace("{0}",y);return bpAlerts.createAlert("","BPS_Add_CC_Error","after","error","",p),!1}if(!this.isNumber(m.value)){p=this.errorMessages.EDPPaymentMethods_CVV_NOT_NUMERIC.replace("{0}",y);return bpAlerts.createAlert("","BPS_Add_CC_Error","after","error","",p),!1}if(m.value.trim().length<4&&"string"==typeof u&&u.length>0&&"AMEX"===u.toUpperCase()||m.value.trim().length<3){p=this.errorMessages.BPSEDPPaymentMethods_CVV_NOT_VALID;return bpAlerts.createAlert("","BPS_Add_CC_Error","after","error","",p),!1}return!0}if(l&&"-1"!=l.value&&s&&"none"==s.style.display&&!dojo.byId("masterPassPaymentExists")){if(!byId("BPS_OPC_Credit_Card_Form")||"none"==byId("BPS_OPC_Credit_Card_Form").style.display)return!0;-1!=o.indexOf("cc_cvc_"+t)&&byId("cc_cvc_"+t)&&""==this.trim(byId("cc_cvc_"+t).value)&&CheckoutHelperJS.paymentDataDirty(1,!0)}if(CheckoutHelperJS.isPaymentDataDirty(t)&&null!=document.getElementById("account_"+t)&&(document.getElementById("account_"+t).value=document.getElementById("account1_"+t).value),-1!=o.indexOf("account_"+t)&&null!=document.getElementById("account_"+t)&&""==document.getElementById("account_"+t).value){var _=this.errorMessages.EDPPaymentMethods_NO_ACCOUNT_NUMBER;return bpAlerts.createAlert("","BPS_Add_CC_Error","after","error","",_),!1}var b=dojo.byId("existingPiId");if(void 0==b||null==b||void 0!=b&&""===b.value){var P=!1;if(dojox.validate.isValidLuhn(document.getElementById("account_"+t).value)){var h=document.getElementById("account_"+t).value;(h=h.split(" ").join("")).toString().length>=14&&h.toString().length<=16&&(P=!0)}if(!P){if("true"==CSRWCParamJS.env_shopOnBehalfEnabled_CSR)if("hidden"!=dojo.attr("account_"+t,"type"))MessageHelper.formErrorHandleClient("account_"+t,this.errorMessages.EDPPaymentMethods_INVALID_ACCOUNT_NUMBER,"below",a.id);else if(dojo.byId("BPS_OPC_CC_Read_Only_Section_1")&&"none"==dojo.byId("BPS_OPC_CC_Read_Only_Section_1").style.display&&"hidden"!=dojo.attr("account1_"+t,"type"))MessageHelper.formErrorHandleClient("account1_"+t,this.errorMessages.EDPPaymentMethods_INVALID_ACCOUNT_NUMBER,"below",a.id);else if(dojo.byId("BPS_OPC_CC_Read_Only_Section_1")||"hidden"==dojo.attr("account1_"+t,"type")){var I=this.errorMessages.EDPPaymentMethods_INVALID_ACCOUNT_NUMBER;bpAlerts.createAlert("","BPS_Add_CC_Error","after","error","",I)}else MessageHelper.formErrorHandleClient("account1_"+t+"_masking_input",this.errorMessages.EDPPaymentMethods_INVALID_ACCOUNT_NUMBER,"below",a.id);else if("hidden"!=dojo.attr("account_"+t,"type"))MessageHelper.formErrorHandleClient("account_"+t,this.errorMessages.EDPPaymentMethods_INVALID_ACCOUNT_NUMBER,"below",a.id);else if(dojo.byId("BPS_OPC_CC_Read_Only_Section_1")&&"none"==dojo.byId("BPS_OPC_CC_Read_Only_Section_1").style.display&&"hidden"!=dojo.attr("account1_"+t,"type"))MessageHelper.formErrorHandleClient("account1_"+t,this.errorMessages.EDPPaymentMethods_INVALID_ACCOUNT_NUMBER,"below",a.id);else if(dojo.byId("BPS_OPC_CC_Read_Only_Section_1")||"hidden"==dojo.attr("account1_"+t,"type")){I=this.errorMessages.EDPPaymentMethods_INVALID_ACCOUNT_NUMBER;bpAlerts.createAlert("","BPS_Add_CC_Error","after","error","",I)}else MessageHelper.formErrorHandleClient("account1_"+t,this.errorMessages.EDPPaymentMethods_INVALID_ACCOUNT_NUMBER,"below",a.id);return!1}}if(null!=document.getElementById("expire_month_"+t)||null!=document.getElementById("expire_year_"+t)){var g=new Date(a.curr_year.value,a.curr_month.value-1,a.curr_date.value),C=(new Date(a.curr_year.value,a.curr_month.value-1,a.curr_date.value),1),v=1;if("month"==document.getElementById("expire_month_"+t).value||"year"==document.getElementById("expire_year_"+t).value){var f=this.errorMessages.EDPPaymentMethods_INVALID_EXPIRY_DATE;return bpAlerts.createAlert("","BPS_Add_CC_Error","after","error","",f),!1}null!=document.getElementById("expire_month_"+t)&&(C=new Number(document.getElementById("expire_month_"+t).value)+1,v=new Number(a.curr_month.value)+1,C>13&&(C=1),v>13&&(v=1));var A=2e3;if(null!=document.getElementById("expire_year_"+t)&&(A=new Date(document.getElementById("expire_year_"+t).value,C-1,1)),dojo.byId("BPS_MULTIPAY_INSTALLMENTS"))var S=parseInt(dojo.byId("BPS_MULTIPAY_INSTALLMENTS").value)-1,O=new Date(a.curr_year.value,v+S,1)}if(CheckoutHelperJS.isPaymentDataDirty(t)&&-1!=o.indexOf("cc_cvc_"+t)&&null!=document.getElementById("cc_cvc_"+t)&&null!=this.trim(document.getElementById("cc_cvc_"+t).value)){d=document.getElementById("cc_cvc_"+t).title;if(0==document.getElementById("cc_cvc_"+t).value.trim().length){p=this.errorMessages.EDPPaymentMethods_CVV_NOT_EMPTY.replace("{0}",d);return bpAlerts.createAlert("","BPS_Add_CC_Error","after","error","",p),!1}if(!this.isNumber(document.getElementById("cc_cvc_"+t).value)){p=this.errorMessages.EDPPaymentMethods_CVV_NOT_NUMERIC.replace("{0}",d);return bpAlerts.createAlert("","BPS_Add_CC_Error","after","error","",p),!1}if("AMEX"===CheckoutPayments.getCardType(dojo.byId("account_"+t).value)&&document.getElementById("cc_cvc_"+t).value.trim().length<4||document.getElementById("cc_cvc_"+t).value.trim().length<3){p=this.errorMessages.BPSEDPPaymentMethods_CVV_NOT_VALID;return bpAlerts.createAlert("","BPS_Add_CC_Error","after","error","",p),!1}}var B=dojo.byId("piAmountRemaining");if(null!=B&&parseFloat(B.value)<0)return MessageHelper.formErrorHandleClient(remainingAmount_display,this.errorMessages.EDPPaymentMethods_AMOUNT_LT_ZERO),!1;if(null!=B&&0==parseFloat(B.value))return MessageHelper.formErrorHandleClient(remainingAmount_display,this.errorMessages.EDPPaymentMethods_AMOUNT_EQ_ZERO),!1;if(null!=B&&""==B.value)return MessageHelper.formErrorHandleClient(remainingAmount_display,this.errorMessages.EDPPaymentMethods_NO_AMOUNT),!1;if(null!=B&&isNaN(B.value))return MessageHelper.formErrorHandleClient(remainingAmount_display,this.errorMessages.EDPPaymentMethods_AMOUNT_NAN),!1;if(dojo.byId("BPS_ENABLE_INSTALLMENT_PAY")&&dojo.byId("BPS_ENABLE_INSTALLMENT_PAY").checked&&"AMEX"===CheckoutPayments.getCardType(dojo.byId("account_"+t).value)){if("hidden"!=dojo.attr("account_"+t,"type"))MessageHelper.formErrorHandleClient("account_"+t,this.errorMessages.BPSEDPPaymentMethods_AMEX_NOT_ALLOWED_MULTIPAY,"below",a.id);else if(dojo.byId("BPS_OPC_CC_Read_Only_Section_1")&&"none"==dojo.byId("BPS_OPC_CC_Read_Only_Section_1").style.display&&"hidden"!=dojo.attr("account1_"+t,"type"))MessageHelper.formErrorHandleClient("account1_"+t,this.errorMessages.BPSEDPPaymentMethods_AMEX_NOT_ALLOWED_MULTIPAY,"below",a.id);else if(dojo.byId("BPS_OPC_CC_Read_Only_Section_1")||"hidden"==dojo.attr("account1_"+t,"type")){var j=this.errorMessages.BPSEDPPaymentMethods_AMEX_NOT_ALLOWED_MULTIPAY;bpAlerts.createAlert("","BPS_Add_CC_Error","after","error","",j)}else MessageHelper.formErrorHandleClient("account1_"+t,this.errorMessages.BPSEDPPaymentMethods_AMEX_NOT_ALLOWED_MULTIPAY,"below",a.id);return!1}if(-1!=o.indexOf("expire_month_"+t)&&-1!=o.indexOf("expire_year_"+t)&&null!=document.getElementById("expire_month_"+t)&&null!=document.getElementById("expire_year_"+t)&&g>=A){var E=this.errorMessages.EDPPaymentMethods_INVALID_EXPIRY_DATE;return bpAlerts.createAlert("","BPS_Add_CC_Error","after","error","",E),!1}if(dojo.byId("BPS_ENABLE_INSTALLMENT_PAY")&&dojo.byId("BPS_ENABLE_INSTALLMENT_PAY").checked&&O>A){var T=this.errorMessages.BPSEDPPaymentMethods_MULTIPAY_CC_INSUFFICIENT_VALIDITY;return bpAlerts.createAlert("","BPS_Add_CC_Error","after","error","",T),!1}if(-1!=o.indexOf("billing_address_id")&&null!=a.billing_address_id&&(""==a.billing_address_id.value||"-1"==a.billing_address_id.value)){var M=this.errorMessages.EDPPaymentMethods_NO_BILLING_ADDRESS;return bpAlerts.createAlert("","BPS_Add_CC_Error","after","error","",M),!1}}if(!this.isBillingAddressValid(e)){M=this.errorMessages.EDPPaymentMethods_BILLING_ADDRESS_INVALID;return bpAlerts.createAlert("","BPS_Add_CC_Error","after","error","",M),!1}if(0==this.guestPaymentData.length){var x=dojo.byId("account_1").value.replace(/[^0-9]/g,""),N=trim(document.getElementById("cc_cvc_1").value);(x.length>=15||x.length<=16)&&!isNaN(N)&&null!=CryptoJS&&"undefined"!=CryptoJS&&(this.guestPaymentData.account=CryptoJS.AES.encrypt(x,"Secret Passphrase"),this.guestPaymentData.cvv=CryptoJS.AES.encrypt(N,"Secret Passphrase"),this.guestPaymentData.isCardDetailsExist="true")}return!0},updateExistingPiId:function(e,t){null!=e&&(document.forms[e+1].existingPiId.value=t)},updateParamObject:function(e,t,a,o,d){if(null==e&&(e=[]),null!=e[t]&&o)if(dojo.isArrayLike(e[t]))null!=d&&""!=d?e[t][d]=a:e[t].push(a);else{var r=e[t];e[t]=[],e[t].push(r),e[t].push(a)}else if(null!=d&&""!=d&&-1!=d)e[t+"_"+d]=a;else if(-1==d){for(var n=1;null!=e[t+"_"+n];)n++;e[t+"_"+n]=a}else e[t]=a;return e},saveBillingAddressDropDownBoxContextProperties:function(e,t){for(var a=1;a<4;a++){if(d=document.forms["PaymentForm"+a]){if(null!=d.billing_address_id){var o=d.billing_address_id.value;"create"==e&&t==a&&(o="-1"),wc.render.getContextById("billingAddressDropDownBoxContext").properties["billingAddress"+a]=o}}else if(!(null==d&&a>1))return}var d;if("edit"==e&&(d=document.forms["PaymentForm"+t]))for(o=d.billing_address_id.value,a=1;a<4;a++){var r=document.forms["PaymentForm"+a];if(r)r.billing_address_id.value==o&&(wc.render.getContextById("billingAddressDropDownBoxContext").properties["billingAddress"+a]="-1")}},createBillingAddress:function(e,t){this.saveBillingAddressDropDownBoxContextProperties("create",e),CheckoutHelperJS.createAddress(-1,t)},displayBillingAddressDetails:function(e,t,a){if(-1!=e.value&&(document.getElementById("selectedAddressId_"+t).value=e.value),CheckoutHelperJS.isAjaxCheckOut()?this.saveBillingAddressDropDownBoxContextProperties("create","-1"):this.displayBillingAddressDetailsWeb10(e,t),-1!=e.value&&CheckoutHelperJS.isAjaxCheckOut()){wc.render.updateContext("billingAddressDropDownBoxContext",{addressKey:e.value,areaNumber:t})}},getTotalInJSON:function(e,t,a){var o={};o.operation=e,o.piFormName=t,o.skipOrderPrepare=a,o.storeId=this.storeId,o.catalogId=this.catalogId,o.langId=this.langId;var d=appendWcCommonRequestParameters("orderTotalAsJSON");dojo.publish("ajaxRequestInitiated"),cursor_wait(),dojo.xhrPost({url:d,handleAs:"json-comment-filtered",content:o,service:this,load:CheckoutPayments.updateAmountFieldsWithTotalInJSON,error:function(e,t){console.debug("error - inside CheckoutPayments.getTotalInJSON()"),console.debug(e),dojo.publish("ajaxRequestCompleted"),cursor_clear()}})},updateAmountFieldsWithTotalInJSON:function(e,t){cursor_clear(),dojo.publish("ajaxRequestCompleted"),null!=e&&void 0!=e&&CheckoutPayments.updateAmountFields(e.orderTotal,e.operation,e.piFormName,e.skipOrderPrepare)},updateAmountFields:function(e,t,a,o){var d,r=0;if(this.numberOfPaymentMethods=document.querySelector("input[data-num-payment-methods]").value,null!=document.getElementById("OrderTotalAmount")&&(document.getElementById("OrderTotalAmount").value=e),dojo.byId("BPS_piAmount_remaining")&&(dojo.byId("BPS_piAmount_remaining").value=e),1==this.numberOfPaymentMethods)return d=document.forms.PaymentForm1,null!=this.retrievePaymentObject(1)&&this.updatePaymentObject(1,"piAmount"),void(void 0!=t&&"OrderPrepare"==t?this.processPIAndCheckout(a,o):(void 0!=t&&"loadPaymentSnippet"==t||supportPaymentTypePromotions)&&this.currentPaymentMethodChanged&&this.updatePaymentObject(this.currentPaymentMethodChanged,"payMethodId"));for(var n=1;n<=this.numberOfPaymentMethods;n++)null==(d=document.forms["PaymentForm"+n]).piAmount||""==d.piAmount.value||isNaN(d.piAmount.value)||(r=1*r+1*d.piAmount.value);var l=e-r;if((l=Math.round(100*l)/100)>0){var s=this.numberOfPaymentMethods;null==(d=document.forms["PaymentForm"+s]).piAmount||""==d.piAmount.value||isNaN(d.piAmount.value)||(d.piAmount.value=parseFloat(d.piAmount.value)+parseFloat(l),d.piAmount_display.value=d.piAmount.value,this.formatAmountDisplayForLocale(s),null!=this.retrievePaymentObject(s)&&this.updatePaymentObject(s,"piAmount"))}else{l*=-1;for(var i=this.numberOfPaymentMethods;i>0;i--)if(null!=(d=document.forms["PaymentForm"+i]).piAmount&&""!=d.piAmount.value&&!isNaN(d.piAmount.value)){if(d.piAmount.value>l){var u=d.piAmount.value-l;d.piAmount.value=Math.round(100*u)/100,d.piAmount_display.value=d.piAmount.value,this.formatAmountDisplayForLocale(i),null!=this.retrievePaymentObject(i)&&this.updatePaymentObject(i,"piAmount"),l=0;break}l-=d.piAmount.value,d.piAmount.value=0,null!=this.retrievePaymentObject(i)&&this.updatePaymentObject(i,"piAmount"),this.formatAmountDisplayForLocale(i)}}void 0!=t&&"OrderPrepare"==t?this.processPIAndCheckout(a,o):void 0!=t&&"loadPaymentSnippet"==t&&this.currentPaymentMethodChanged&&(this.loadPaymentSnippet(document.getElementById("payMethodId_"+this.currentPaymentMethodChanged),this.currentPaymentMethodChanged),this.updatePaymentObject(this.currentPaymentMethodChanged,"payMethodId"))},displayBillingAddressDetailsWeb10:function(e,t){var a=e.value;for(j=0;j<e.options.length;j++)e.options[j].value==a?dojo.byId("billingAddressDetails_"+e.options[j].value+"_"+t).style.display="block":dojo.byId("billingAddressDetails_"+e.options[j].value+"_"+t).style.display="none"},removeCreditCardNumberAndCVV:function(e,t,a){CheckoutHelperJS.isPaymentDataDirty(e)||(t&&(null!=document.forms["PaymentForm"+e].valueFromProfileOrder&&"Y"==document.forms["PaymentForm"+e].valueFromProfileOrder.value||null!=dojo.byId("account1_"+e)&&(dojo.byId("account1_"+e).value="")),a&&null!=dojo.byId("cc_cvc_"+e)&&(dojo.byId("cc_cvc_"+e).value=""))},initializePaymentAreaDataDirtyFlags:function(){CheckoutHelperJS.dataDirty[1]=!1,CheckoutHelperJS.dataDirty[2]=!1,CheckoutHelperJS.dataDirty[3]=!1},initializeOverallPaymentObjects:function(){this.prevNumberOfPaymentMethods=document.querySelector("input[data-num-payment-methods]").value,this.numberOfPaymentMethods=parseInt(document.querySelector("input[data-num-payment-methods]").value);var e=parseInt(this.maxNumberOfPaymentMethodsSupported);void 0!=dojo.byId("isEGiftCardOnly")&&null!=dojo.byId("isEGiftCardOnly")&&void 0!=dojo.byId("CC")&&null!=dojo.byId("CC")&&1==dojo.byId("CC").checked&&byId("shippingBillingPageNext").classList.add("not-active");for(var t=1;t<=e;t++)console.debug("i "+t),this.initializePaymentObject(t);var a="";document.forms.PaymentForm1&&document.forms.PaymentForm1.existingPiId&&(a=document.forms.PaymentForm1.existingPiId.value);var o=null;if(document.forms.PaymentForm1&&document.forms.PaymentForm1.unboundPiId&&null!=(o=document.forms.PaymentForm1.unboundPiId.value)&&""!=o)var d=o.split(",");if(null!=a&&""!=a){var r=a.split(",");for(t=0;t<r.length;t++){var n=t+1;if(this.retrievePaymentObject(n).piId=r[t],document.forms["PaymentForm"+n].piId.value=r[t],n>this.numberOfPaymentMethods?this.retrievePaymentObject(n).action="delete":supportPaymentTypePromotions&&!CheckoutHelperJS.isAjaxCheckOut()&&(this.retrievePaymentObject(n).action="re-add"),supportPaymentTypePromotions&&null!=o&&""!=o)for(var l=0;l<d.length;l++)if(this.retrievePaymentObject(n).piId==d[l]){this.retrievePaymentObject(n).action="re-add";break}}}else this.retrievePaymentObject(1).action="add";supportPaymentTypePromotions&&document.forms.PaymentForm1&&("Y"==this.getValue(document.forms.PaymentForm1,"valueFromProfileOrder")||"PayInStore"==this.getValue(document.forms.PaymentForm1,"payMethodId"))&&(requestSubmitted?this.updatePaymentTypePromotionForProfileCheckoutHandler=dojo.topic.subscribe("requestSubmittedChanged",function(e){e||(CheckoutPayments.updatePaymentTypePromotionForProfileCheckoutHandler.remove(),CheckoutPayments.updateUnboundPaymentToOrder())}):this.updateUnboundPaymentToOrder())},initializePaymentObject:function(e){var t=new Array;t.piId="",t.action="",t.fields=new Array,t.options="",this.storePaymentObject(e,t)},storePaymentObject:function(e,t){this.paymentObjects[e]=t},retrievePaymentObject:function(e){return console.debug("retrievePaymentObject paymentAreaNum = "+e+" payObj "+this.paymentObjects),this.paymentObjects[e]},updatePaymentObject:function(e,t){var a=this.retrievePaymentObject(e);if(null!=a&&(""==a.piId?a.action="add":"piAmount"==t&&"add"!=a.action&&"delete"!=a.action&&"re-add"!=a.action?a.action="update":a.action="re-add","piAmount"==t)){for(var o=!1,d=0;d<a.fields.length;d++)if(a.fields[d]==t){o=!0;break}o||a.fields.push(t)}},setPaymentsToDelete:function(e){this.paymentsToDelete.push(e)},getPaymentsToDelete:function(){return this.paymentsToDelete},setPaymentsToAdd:function(e){this.paymentsToAdd.push(e)},getPaymentsToAdd:function(){return this.paymentsToAdd},setPaymentsToUpdate:function(e){this.paymentsToUpdate.push(e)},getPaymentsToUpdate:function(){return this.paymentsToUpdate},deletePaymentInstructions:function(){var e=[];if(e.piId=new Array,this.getPaymentsToDelete().length>0){var t=this.getPaymentsToDelete().pop();e.piId.push(document.forms["PaymentForm"+t].piId.value),e.storeId=this.storeId,e.catalogId=this.catalogId,e.paymentAreaNumber=t,e.langId=this.langId,null!=document.forms.PaymentForm1.authToken&&(e.authToken=document.forms.PaymentForm1.authToken.value),e.orderId="."}if(submitRequest()){var a=document.forms["PaymentForm"+t];void 0!=typeof a.id&&(service=wc.service.getServiceById("AjaxDeletePaymentInstructionFromThisOrder"),service.formId=a.id),""!=e.payMethodId&&"empty"!=e.payMethodId||0!=this.getPaymentsToAdd().length?(cursor_wait(),wc.service.invoke("AjaxDeletePaymentInstructionFromThisOrder",e)):dojo.publish("PIAddCompleted",null)}},addPaymentInstructions:function(e){var t=[],a=!1;if(e&&(a=e),this.getPaymentsToAdd().length>0){var o=this.getPaymentsToAdd().pop(),d=document.forms["PaymentForm"+o];if(t=this.populateProtocolData(d,t),dojo.byId("PP")&&1==dojo.byId("PP").checked&&0==this.getPaymentsToAdd().length)return void dojo.publish("PIAddCompleted",null);if(dojo.byId("SZ")&&1==dojo.byId("SZ").checked&&0==this.getPaymentsToAdd().length){t.payMethodId="Sezzle",t.piAmount=document.getElementById("BPS_piAmount_remaining").value,t.cc_brand="",t.account="";var r=document.querySelectorAll("input[data-address-id]");return"undefined"!=BPSCheckoutHelperJS.selectedBillingAddressId&&null!=BPSCheckoutHelperJS.selectedBillingAddressId&&""!=BPSCheckoutHelperJS.selectedBillingAddressId?t.billing_address_id=BPSCheckoutHelperJS.selectedBillingAddressId:r[1]?t.billing_address_id=r[1].value:t.billing_address_id=dojo.byId("billing_address_id_1").value,void wc.service.invoke("AjaxAddPaymentInstructionToThisOrder",t)}var n="";if(dojo.byId("quickCheckoutProfileForPayment_1")&&"true"!=dojo.byId("quickCheckoutProfileForPayment_1").value&&dojo.byId("account_"+o)){t.account=dojo.byId("account_"+o).value.replace(/[^0-9]/g,""),(n=this.getCardType(t.account))||(n="VISA"),t.payMethodId=n;var l=dojo.byId("BPS_OPC_Wallet_Select"),s=dojo.byId("BPS_OPC_Walet_Form"),i="";if(l&&"-1"!=l.value&&s&&"none"!=s.style.display)t.wallet=l.value,t.cc_cvc=dojo.byId("BPS_OPC_Wallet_CVV").value,walletCardType=l.options[l.selectedIndex].getAttribute("data-cc-brand"),-1!==walletCardType.toLowerCase().indexOf("club visa")||-1!==walletCardType.toLowerCase().indexOf("cabelas club visa")?i="Cabelas Club Visa":-1!==walletCardType.toLowerCase().indexOf("cabela's club")||-1!==walletCardType.toLowerCase().indexOf("cabelasclubmastercard")?i="CabelasClubMasterCard":-1!==walletCardType.toLowerCase().indexOf("bass pro shops club")||-1!==walletCardType.toLowerCase().indexOf("clubmasterCard")?i="ClubMasterCard":(walletCardType.toLowerCase().indexOf("club business")>-1||-1!==walletCardType.toLowerCase().indexOf("clubBusinesscard"))&&(i="ClubBusinessCard"),t.payMethodId=""!=i?i:walletCardType,t.clubCardType=walletCardType;else if(l&&"-1"!=l.value&&s&&"none"==s.style.display){t.wallet=l.value,walletCardType=l.options[l.selectedIndex].getAttribute("data-cc-brand");i="";-1!==walletCardType.toLowerCase().indexOf("club visa")||-1!==walletCardType.toLowerCase().indexOf("Cabelas Club Visa")?i="Cabelas Club Visa":-1!==walletCardType.toLowerCase().indexOf("cabela's club")||-1!==walletCardType.toLowerCase().indexOf("CabelasClubMasterCard")?i="CabelasClubMasterCard":-1!==walletCardType.toLowerCase().indexOf("bass pro shops club")||-1!==walletCardType.toLowerCase().indexOf("ClubMasterCard")?i="ClubMasterCard":(walletCardType.toLowerCase().indexOf("club business")>-1||-1!==walletCardType.toLowerCase().indexOf("ClubBusinessCard"))&&(i="ClubBusinessCard"),t.payMethodId=""!=i?i:walletCardType,t.clubCardType=walletCardType}}else t.cc_cvc=dojo.byId("quick_checkout_cvv").value,t.account=dojo.byId("account_"+o).value;t.cc_brand=n,t.piAmount=document.getElementById("BPS_piAmount_remaining").value;r=document.querySelectorAll("input[data-address-id]");"undefined"!=BPSCheckoutHelperJS.selectedBillingAddressId&&null!=BPSCheckoutHelperJS.selectedBillingAddressId&&""!=BPSCheckoutHelperJS.selectedBillingAddressId?t.billing_address_id=BPSCheckoutHelperJS.selectedBillingAddressId:r[1]?t.billing_address_id=r[1].value:t.billing_address_id=dojo.byId("billing_address_id_1").value,t.isMultiPay="false",dojo.byId("BPS_ENABLE_INSTALLMENT_PAY")&&dojo.byId("BPS_ENABLE_INSTALLMENT_PAY").checked&&(t.isMultiPay="true"),dojo.byId("isZeroPercentPromo")&&"true"===dojo.byId("isZeroPercentPromo").value&&(t.isZPPromo="true"),t.saveCard="false",dojo.byId("BPS_OPC_SAVE_CARD")&&dojo.byId("BPS_OPC_SAVE_CARD").checked&&"SezzleO"!==n&&(t.saveCard="true")}if(null!=this.guestPaymentData&&"true"==this.guestPaymentData.isCardDetailsExist&&null!=CryptoJS&&"undefined"!=CryptoJS){l=dojo.byId("BPS_OPC_Wallet_Select"),s=dojo.byId("BPS_OPC_Walet_Form"),i="";if(l&&"-1"!=l.value&&s&&"none"!=s.style.display&&!dojo.byId("masterPassPaymentExists"))t.wallet=l.value,t.cc_cvc=dojo.byId("BPS_OPC_Wallet_CVV").value,walletCardType=l.options[l.selectedIndex].getAttribute("data-cc-brand"),-1!==walletCardType.toLowerCase().indexOf("club visa")||-1!==walletCardType.toLowerCase().indexOf("cabelas club visa")?i="Cabelas Club Visa":-1!==walletCardType.toLowerCase().indexOf("cabela's club")||-1!==walletCardType.toLowerCase().indexOf("cabelasclubmastercard")?i="CabelasClubMasterCard":-1!==walletCardType.toLowerCase().indexOf("bass pro shops club")||-1!==walletCardType.toLowerCase().indexOf("clubmasterCard")?i="ClubMasterCard":(walletCardType.toLowerCase().indexOf("club business")>-1||-1!==walletCardType.toLowerCase().indexOf("clubBusinesscard"))&&(i="ClubBusinessCard"),""!=i?(t.payMethodId=i,t.clubCardType=walletCardType,t.cc_brand=i):t.payMethodId=walletCardType;else if(l&&"-1"!=l.value&&s&&"none"==s.style.display&&!dojo.byId("masterPassPaymentExists")){t.wallet=l.value,walletCardType=l.options[l.selectedIndex].getAttribute("data-cc-brand");i="";-1!==walletCardType.toLowerCase().indexOf("club visa")||-1!==walletCardType.toLowerCase().indexOf("Cabelas Club Visa")?i="Cabelas Club Visa":-1!==walletCardType.toLowerCase().indexOf("cabela's club")||-1!==walletCardType.toLowerCase().indexOf("CabelasClubMasterCard")?i="CabelasClubMasterCard":-1!==walletCardType.toLowerCase().indexOf("bass pro shops club")||-1!==walletCardType.toLowerCase().indexOf("ClubMasterCard")?i="ClubMasterCard":(walletCardType.toLowerCase().indexOf("club business")>-1||-1!==walletCardType.toLowerCase().indexOf("ClubBusinessCard"))&&(i="ClubBusinessCard"),""!=i?(t.payMethodId=i,t.cc_brand=i,t.clubCardType=walletCardType):t.payMethodId=walletCardType}else{t.cc_cvc=CryptoJS.AES.decrypt(this.guestPaymentData.cvv,"Secret Passphrase").toString(CryptoJS.enc.Utf8);var u=CryptoJS.AES.decrypt(this.guestPaymentData.account,"Secret Passphrase").toString(CryptoJS.enc.Utf8);t.account=u.trim();var c=getCardType(u.trim()),m="";m=-1!=c.toLowerCase().indexOf("club visa")||-1!=c.toLowerCase().indexOf("cabelas club visa")?"Cabelas Club Visa":-1!=c.toLowerCase().indexOf("cabela's club")||-1!=c.toLowerCase().indexOf("cabelasclubmastercard")?"CabelasClubMasterCard":-1!=c.toLowerCase().indexOf("bass pro shops club")||-1!=c.toLowerCase().indexOf("clubmastercard")?"ClubMasterCard":c.toLowerCase().indexOf("club business")>-1||-1!=c.toLowerCase().indexOf("clubbusinesscard")?"ClubBusinessCard":c,t.cc_brand=m,t.payMethodId=m}}submitRequest()&&(cursor_wait(),a&&(service=wc.service.getServiceById("AjaxAddPaymentInstructionToThisOrder")),wc.service.invoke("AjaxAddPaymentInstructionToThisOrder",t))},updatePaymentInstructions:function(){var e=[];if(this.getPaymentsToUpdate().length>0){var t=this.getPaymentsToUpdate().pop(),a=document.forms["PaymentForm"+t],o=this.retrievePaymentObject(t);o.fields=[],o.fields.push("storeId"),o.fields.push("catalogId"),o.fields.push("langId"),o.fields.push("payMethodId"),o.fields.push("authToken"),o.fields.push("orderId"),document.forms["PaymentForm"+t].paymentDataEditable.value=!0,o.fields.push("paymentDataEditable"),(e=this.populateProtocolDataForGivenFields(a,e,o.fields)).piAmount=dojo.byId("BPS_piAmount_remaining").value;var d=document.querySelectorAll("input[data-address-id]");"undefined"!=BPSCheckoutHelperJS.selectedBillingAddressId&&null!=BPSCheckoutHelperJS.selectedBillingAddressId&&""!=BPSCheckoutHelperJS.selectedBillingAddressId?e.billing_address_id=BPSCheckoutHelperJS.selectedBillingAddressId:d[1]?e.billing_address_id=d[1].value:e.billing_address_id=dojo.byId("billing_address_id_1").value,e.piId=o.piId,e.orderId=o.orderId,e.isMultiPay="false",(dojo.byId("BPS_ENABLE_INSTALLMENT_PAY")||dojo.byId("BPS_OPC_SAVE_CARD"))&&(e.paymentDataEditable="true"),dojo.byId("isZeroPercentPromo")&&"true"===dojo.byId("isZeroPercentPromo").value&&(e.isZPPromo="true"),dojo.byId("BPS_ENABLE_INSTALLMENT_PAY")&&dojo.byId("BPS_ENABLE_INSTALLMENT_PAY").checked&&(e.isMultiPay="true"),e.saveCard="false",dojo.byId("BPS_OPC_SAVE_CARD")&&dojo.byId("BPS_OPC_SAVE_CARD").checked&&(e.saveCard="true")}submitRequest()&&(cursor_wait(),void 0!=typeof(a=document.forms["PaymentForm"+t]).id&&(service=wc.service.getServiceById("AjaxUpdatePaymentInstructionInThisOrder")),wc.service.invoke("AjaxUpdatePaymentInstructionInThisOrder",e))},reinitializePaymentObjects:function(e){supportPaymentTypePromotions&&this.updateUnboundPaymentToOrder();var t=parseInt(e.value),a=parseInt(this.prevNumberOfPaymentMethods),o=parseInt(this.maxNumberOfPaymentMethodsSupported);if(t<a)for(var d=t+1;d<=o;d++){""==(r=this.retrievePaymentObject(d)).piId?r.action="":(r.action="delete",console.debug("The action in the payment object associated with payment area "+d+" was updated to 'delete'."))}else if(t>a)for(d=a+1;d<=o;d++){var r;""!=(r=this.retrievePaymentObject(d)).piId?d>t&&d<=o?(r.action,console.debug("The action in the payment object associated with payment area "+d+" was updated to 'delete'.")):(r.action,console.debug("The action in the payment object associated with payment area "+d+" was updated to 're-add'.")):(this.initializePaymentObject(d),console.debug("A new payment object was initialized to be associated with payment area "+d+"."))}this.prevNumberOfPaymentMethods=t},setPaymentFormPiId:function(e,t){var a=document.forms["PaymentForm"+e];a&&(a.piId.value=t)},updateUnboundPaymentToOrder:function(e){this.currentPaymentMethodChanged=e;var t=document.forms.PaymentForm1,a=this.getValue(t,"piId");if(null!=a&&""!=a){var o=[];if(o.storeId=this.storeId,""==o.storeId&&""!=WCParamJS.storeId&&(o.storeId=WCParamJS.storeId),o.catalogId=this.catalogId,o.langId=this.langId,o.orderId=".",o.piId=a,!submitRequest())return;cursor_wait(),wc.service.invoke("AjaxDeleteUnboundPaymentInstructionFromThisOrder",o)}else{var d="FALSE",r="FALSE";dojo.byId("isODRPromoActive")&&(r=dojo.byId("isODRPromoActive").value),dojo.byId("isCLUBPointsPromoActive")&&(d=dojo.byId("isCLUBPointsPromoActive").value);var n="FALSE",l="FALSE";dojo.byId("dontaddUnboundforClubPoints")&&(n=dojo.byId("dontaddUnboundforClubPoints").value),dojo.byId("dontaddUnboundforODR")&&(l=dojo.byId("dontaddUnboundforODR").value),(!supportPaymentTypePromotions||1!=CheckoutPayments.numberOfPaymentMethods||"TRUE"!=n&&"TRUE"!=l||!d&&!r)&&this.addNewUnboundPaymentInstruction()}},addNewUnboundPaymentInstruction:function(){document.forms.PaymentForm1;var e=[];e.storeId=this.storeId,""==e.storeId&&""!=WCParamJS.storeId&&(e.storeId=WCParamJS.storeId),e.catalogId=this.catalogId,e.langId=this.langId;var t=document.querySelectorAll("input[data-address-id]");if("undefined"!=BPSCheckoutHelperJS.selectedBillingAddressId&&null!=BPSCheckoutHelperJS.selectedBillingAddressId&&""!=BPSCheckoutHelperJS.selectedBillingAddressId?e.billing_address_id=BPSCheckoutHelperJS.selectedBillingAddressId:t[1]?e.billing_address_id=t[1].value:e.billing_address_id=dojo.byId("billing_address_id_1").value,null!=document.forms.PaymentForm1.authToken&&(e.authToken=document.forms.PaymentForm1.authToken.value),dojo.byId("SZ")&&1==dojo.byId("SZ").checked&&0==this.getPaymentsToAdd().length)return e.payMethodId="Sezzle",e.unbound=!0,e.account="",void wc.service.invoke("AjaxAddUnboundPaymentInstructionToThisOrder",e);var a="VISA";a=this.getCardType(dojo.byId("account1_1").value.replace(/[^0-9]/g,""));var o=document.forms.PaymentForm1.valueFromProfileOrder;if(o&&"Y"===o.value&&(a=document.forms.PaymentForm1.payMethodId.value),dojo.byId("BPS_OPC_Wallet_Select")){var d=dojo.byId("BPS_OPC_Wallet_Select");""!==a&&"-1"==d.value||null==d.options[d.selectedIndex].getAttribute("data-cc-brand")||(-1!==(a=d.options[d.selectedIndex].getAttribute("data-cc-brand")).toLowerCase().indexOf("club visa")?a="Cabelas Club Visa":-1!==a.toLowerCase().indexOf("bass pro shops club")?a="ClubMasterCard":a.toLowerCase().indexOf("cabela's club")>-1?a="CabelasClubMasterCard":a.toLowerCase().indexOf("club business")>-1&&(a="ClubBusinessCard"))}if(e.cc_brand=a,e.account=dojo.byId("account1_1").value.replace(/[^0-9]/g,""),e.payMethodId=a,e.unbound=!0,"empty"!=e.payMethodId&&""!=e.payMethodId){if(!submitRequest())return;var r="FALSE",n="FALSE";dojo.byId("isODRPromoActive")&&(n=dojo.byId("isODRPromoActive").value),dojo.byId("isCLUBPointsPromoActive")&&(r=dojo.byId("isCLUBPointsPromoActive").value);var l="FALSE",s="FALSE";dojo.byId("dontaddUnboundforClubPoints")&&(l=dojo.byId("dontaddUnboundforClubPoints").value),dojo.byId("dontaddUnboundforODR")&&(s=dojo.byId("dontaddUnboundforODR").value),(!supportPaymentTypePromotions||1!=CheckoutPayments.numberOfPaymentMethods||"TRUE"!=l&&"TRUE"!=s||!r&&!n)&&(cursor_wait(),wc.service.invoke("AjaxAddUnboundPaymentInstructionToThisOrder",e))}},reAddNewUnboundPaymentInstruction:function(){document.forms.PaymentForm1;var e=[];e.storeId=this.storeId,""==e.storeId&&""!=WCParamJS.storeId&&(e.storeId=WCParamJS.storeId),e.catalogId=this.catalogId,e.langId=this.langId,null!=document.forms.PaymentForm1.authToken&&(e.authToken=document.forms.PaymentForm1.authToken.value);var t="VISA";t=this.getCardType(dojo.byId("account1_1").value.replace(/[^0-9]/g,""));var a=document.forms.PaymentForm1.valueFromProfileOrder;if(a&&"Y"===a.value&&(t=document.forms.PaymentForm1.payMethodId.value),dojo.byId("BPS_OPC_Wallet_Select")){var o=dojo.byId("BPS_OPC_Wallet_Select");""!==t&&"-1"==o.value||(-1!==(t=o.options[o.selectedIndex].getAttribute("data-cc-brand")).toLowerCase().indexOf("club visa")?t="Cabelas Club Visa":-1!==t.toLowerCase().indexOf("bass pro shops club")?t="ClubMasterCard":t.toLowerCase().indexOf("cabela's club")>-1?t="CabelasClubMasterCard":-1!==t.toLowerCase().indexOf("sportsman club")?t="SportsManClubMasterCard":t.toLowerCase().indexOf("club business")>-1&&(t="ClubBusinessCard"))}var d=document.querySelectorAll("input[data-address-id]");if("undefined"!=BPSCheckoutHelperJS.selectedBillingAddressId&&null!=BPSCheckoutHelperJS.selectedBillingAddressId&&""!=BPSCheckoutHelperJS.selectedBillingAddressId?e.billing_address_id=BPSCheckoutHelperJS.selectedBillingAddressId:d[1]?e.billing_address_id=d[1].value:e.billing_address_id=dojo.byId("billing_address_id_1").value,e.cc_brand=t,e.account=dojo.byId("account1_1").value.replace(/[^0-9]/g,""),e.payMethodId=t,e.unbound=!0,"empty"!=e.payMethodId&&""!=e.payMethodId){var r="FALSE",n="FALSE";dojo.byId("isODRPromoActive")&&(n=dojo.byId("isODRPromoActive").value),dojo.byId("isCLUBPointsPromoActive")&&(r=dojo.byId("isCLUBPointsPromoActive").value);var l="FALSE",s="FALSE";dojo.byId("dontaddUnboundforClubPoints")&&(l=dojo.byId("dontaddUnboundforClubPoints").value),dojo.byId("dontaddUnboundforODR")&&(s=dojo.byId("dontaddUnboundforODR").value),(!supportPaymentTypePromotions||1!=CheckoutPayments.numberOfPaymentMethods||"TRUE"!=l&&"TRUE"!=s||!r&&!n)&&(cursor_wait(),wc.service.invoke("AjaxAddUnboundPaymentInstructionToThisOrder",e))}},isSinglePaymentType:function(){for(var e=document.forms.PaymentForm1,t=this.getValue(e,"payMethodId"),a="empty"!=t&&""!=t,o=2;a&&o<=this.numberOfPaymentMethods;o++){var d=document.forms["PaymentForm"+o];a=this.getValue(d,"payMethodId")==t}return a},updateBillingAddress:function(e,t,a){if(null!=a){var o=document.getElementById("billing_address_id_"+e);if("OutdoorRewards"==t)for(var d=0;d<o.options.length;d++)if(o.options[d].value==a){o.selectedIndex=d;break}}},toggleCheckoutOption:function(e){e.value;return"PP"==e.id?(dojo.byId("paypalPaymentExists")||(dojo.byId("paypalButtons").style.display="",dojo.byId("BPS_OPC_CHECKOUT_REVIEW_BUTTONS").style.display="none"),dojo.byId("paymentArea1").style.display="none",dojo.byId("sezzleespotMessge")&&(dojo.byId("sezzleespotMessge").style.display="none"),dojo.byId("shippingBillingPageNext")&&null!=byId("shippingBillingPageNext").classList&&byId("shippingBillingPageNext").classList.value.indexOf("not-active")>-1&&byId("shippingBillingPageNext").classList.remove("not-active")):"SZ"==e.id?(dojo.byId("shippingBillingPageNext")&&null!=byId("shippingBillingPageNext").classList&&byId("shippingBillingPageNext").classList.value.indexOf("not-active")>-1&&byId("shippingBillingPageNext").classList.remove("not-active"),dojo.byId("paypalButtons")&&(dojo.byId("paypalButtons").style.display="none"),dojo.byId("sezzleespotMessge")&&(dojo.byId("sezzleespotMessge").style.display=""),dojo.byId("BPS_OPC_CHECKOUT_REVIEW_BUTTONS").style.display="",dojo.byId("paymentArea1").style.display="none",this.updateUnboundPaymentToOrder(1)):(dojo.byId("paypalButtons")&&(dojo.byId("paypalButtons").style.display="none"),dojo.byId("sezzleespotMessge")&&(dojo.byId("sezzleespotMessge").style.display="none"),dojo.byId("BPS_OPC_CHECKOUT_REVIEW_BUTTONS").style.display="",dojo.byId("shippingBillingPageNext")&&"CC"==e.id&&this.toggleReviewOrderButton("PaymentForm"),dojo.byId("paymentArea1").style.display=""),!1},PaypalCEPOptionSelected:function(e){dojo.style("grayOut","display","none"),CheckoutPayments.toggleCheckoutOption(e)},checkoutPayPal:function(e){dojo.byId("shippingBillingPageNext")&&null!=byId("shippingBillingPageNext").classList&&byId("shippingBillingPageNext").classList.value.indexOf("not-active")>-1&&byId("shippingBillingPageNext").classList.remove("not-active");var t="";null!=document.getElementById("InstantCredit")&&(t=document.getElementById("InstantCredit").value),"undefined"!=t&&""!=t&&"true"==t?(dojo.query("#IC_MasterpassURL").style({display:"none"}),dojo.query("#IC_PaypalURL").connect("onclick",function(){CheckoutPayments.updatePaymentObject(e,""),dojo.subscribe("PIAddCompleted",sendToPayPal),CheckoutPayments.processCheckout("PaymentForm",!0)}),cursor_wait(),dojo.query("#IC_PaypalURL").style({display:"block"}),dijit.byId("BPSICPaypalMasterpassDialog").show()):(CheckoutPayments.updatePaymentObject(e,""),dojo.subscribe("PIAddCompleted",sendToPayPal),CheckoutPayments.processCheckout("PaymentForm",!0))},getCardType:function(e){var t="",a=(e.length,new RegExp("^4"));return null!=e.match(a)&&(t="VISA"),a=new RegExp("^5|^2"),null!=e.match(a)&&(t="MasterCard"),a=new RegExp("^532079002"),null!=e.match(a)&&(t="SezzleO"),a=new RegExp("^3"),null!=e.match(a)&&(t="AMEX"),a=new RegExp("^3(?:0[0-5]\\d|095|6\\d{0,2}|[89]\\d{2})"),null!=e.match(a)&&(t="Diners"),a=new RegExp("^(?:2131|1800|3(?:5(?:2[89]|[3-8][0-9])|(?:09[6-9]|10[012])|1(?:1[2-9]|20)|15[89]|3(?:3[7-9]|4[0-9])|0(?:8[89]|9[0-4])))"),null!=e.match(a)&&(t="JCB"),a=new RegExp("^6"),null!=e.match(a)&&(t="Discover"),a=new RegExp("^62|^81"),null!=e.match(a)&&(t="UnionPay"),a=new RegExp("^521134|^552426"),null!=e.match(a)&&(t="Outdoor Rewards Master Card"),a=new RegExp("^517148|^558650|^559136"),null!=e.match(a)&&(t="ClubMasterCard"),a=new RegExp("^515678|^546325|^552341"),null!=e.match(a)&&(t="CabelasClubMasterCard"),a=new RegExp("^555675|^555422"),null!=e.match(a)&&(t="ClubBusinessCard"),t},isClubCardselected:function(){if(dojo.byId("BPS_OPC_Wallet_Select")){var e=dojo.byId("BPS_OPC_Wallet_Select"),t="";return""!==t&&"-1"==e.value||null==e.options[e.selectedIndex].getAttribute("data-cc-brand")||(-1!==(t=e.options[e.selectedIndex].getAttribute("data-cc-brand")).toLowerCase().indexOf("club visa")?t="Cabelas Club Visa":-1!==t.toLowerCase().indexOf("bass pro shops club")?t="ClubMasterCard":t.toLowerCase().indexOf("cabela's club")>-1?t="CabelasClubMasterCard":t.toLowerCase().indexOf("club business")>-1&&(t="ClubBusinessCard")),t}},hideClubCardCVVMsg:function(){null!=dojo.byId("clubCardCvvMsg")&&void 0!=dojo.byId("clubCardCvvMsg")&&"block"==dojo.byId("clubCardCvvMsg").style.display&&(dojo.byId("clubCardCvvMsg").style.display="none"),null!=dojo.byId("BPS_OPC_Wallet_CVV")&&""==dojo.byId("BPS_OPC_Wallet_CVV").value&&(dojo.byId("clubCardCvvMsg").style.display="block")},hideSaveThisCard:function(e){var t=dojo.byId("account1_"+e).value.replace(/[^0-9]/g,"");t.length>0&&(t.startsWith("559136")||t.startsWith("552341")||t.startsWith("555422"))?(t.length>=8&&dojo.byId("BPS_SAVE_CC")&&$("#BPS_SAVE_CC").hide(),t.length<8&&dojo.byId("BPS_SAVE_CC")&&$("#BPS_SAVE_CC").show()):dojo.byId("BPS_SAVE_CC")&&$("#BPS_SAVE_CC").show()}};