function ShoppingListJS(storeParams,catEntryParams,shoppingListNames,jsObjectName){this.storeParams=storeParams,this.catEntryParams=catEntryParams,this.catEntryParams.quantity=1,this.shoppingListNames=shoppingListNames,this.addItemAfterCreate=!1,this.jsObjectName=jsObjectName,this.dropDownVisible=!1,this.dropDownInFocus=!1,this.dropDownOpen=!1,this.exceptionFlag=!1,this.mouseOnArrow=!1,this.pageName="",this.itemId=-1,this.chartItemId=-1,this.skuNum="";var eventName="";for(baseItemId in this.nameToDelete="",this.orderItemId="",this.actionBeingPerformed="","shoppingListJS"!=jsObjectName&&(this.pageName=jsObjectName.replace("shoppingListJS",""),eventName=this.pageName+"_"),this.setCatEntryQuantity=function(e){e=dojo.fromJson(e);if(dojo.isObject(e)){var t=this.catEntryParams.components[e.baseItemId];t.id!=e.baseItemId&&0!=e.id&&(t.id=e.id),t.quantity=e.quantity}else this.catEntryParams.quantity=e},this.setCatEntryAttributes=function(e){this.catEntryParams.attributes=dojo.fromJson(e)},this.setItemId=function(e){this.itemId=e},this.hideDropDown=function(){var e=dojo.byId(this.pageName+"shoppingListDropDown");if(e){e.style.display="none",dojo.query("#"+this.pageName+"addToShoppingListBtn .drop").length>0&&dojo.query("#"+this.pageName+"addToShoppingListBtn .drop")[0].focus(),this.dropDownVisible=!1,this.dropDownInFocus=!1,this.dropDownOpen=!1,void 0!=(s=dojo.query(".widget_quick_info_popup .content_right_border")[0])&&dojo.style(s,"height","auto")}else{for(var t=dojo.query('div[id$="shoppingListDropDown"]'),i=0;i<t.length;i++)t[i].style.display="none",this.dropDownVisible=!1,this.dropDownInFocus=!1,this.dropDownOpen=!1;var s;void 0!=(s=dojo.query(".widget_quick_info_popup .content_right_border")[0])&&dojo.style(s,"height","auto")}},this.checkIfRegUserAddToDefaultList=function(e){if(null!=e&&""!=e&&"undefined"!=e){if(dojo.byId(analyticsWishlist_sku_tm_Quantity)){var t=document.getElementById(e+"_Quantity_Input");dojo.byId("analyticsWishlist_sku_tm_Quantity").value=t.value}if(dojo.byId(analyticsWishlist_sku_unitPrice)){var i=document.getElementById("analyticsWishlist_unitPrice_"+e);dojo.byId("analyticsWishlist_sku_unitPrice").value=i.value}}else{if(dojo.byId(analyticsWishlist_sku_tm_Quantity)){var s=document.getElementById("coveoFBTProductId");t=document.getElementById("quantity_"+s.value);dojo.byId("analyticsWishlist_sku_tm_Quantity").value=t.value}if(dojo.byId("analyticsWishlist_sku_unitPrice")){s=document.getElementById("coveoFBTProductId");var o=document.getElementById("resolvedSkuId_"+s.value);i=document.getElementById("ProductInfoPrice_"+o.value);dojo.byId("analyticsWishlist_sku_unitPrice").value=i.value.replace(/\$/g,"")}}this.pageName;var a=!0;if(void 0!==getCookie("WC_USERACTIVITY_-1002")?a=!1:dojo.xhrGet({url:getAbsoluteURL()+"BPSGetHeaderDetailsView",content:{storeId:WCParamJS.storeId},handleAs:"json",sync:!0,load:function(e){"G"===e.userType||"true"===e.rememberMe?a=!1:"R"===e.userType&&(a=!0)},error:function(e,t){}}),a){var r=!1,d=0;dojo.xhrGet({url:getAbsoluteURL()+"BPSAJAXGetShoppingListView",handleAs:"json",sync:!0,content:{storeId:WCParamJS.storeId},load:function(e){if(null!=e&&void 0!=e)for(var t=0;t<e.length;t++)if(void 0!=e[t].uniqueID&&void 0!=e[t].description&&"Default"===e[t].state){d=e[t].uniqueID,r=!0;break}},error:function(e,t){console.debug("error")}}),r?this.createDefaultListAndAddItem(d,null,e):this.createDefaultListAndAddItem(-1,null,e)}else this.showDropDown(e)},this.showDropDown=function(e){if(0==this.dropDownOpen){var t=this.pageName;null!=e&&(t=e);var i=!0;if(null!=dojo.byId(t+"ShoppingList_dummyShoppingList")&&"none"!=dojo.byId(t+"ShoppingList_dummyShoppingList").style.display&&(void 0!==getCookie("WC_USERACTIVITY_-1002")?i=!1:dojo.xhrGet({url:getAbsoluteURL()+"BPSGetHeaderDetailsView",content:{storeId:WCParamJS.storeId},handleAs:"json",sync:!0,load:function(e){"G"===e.userType||"true"===e.rememberMe?i=!1:"R"===e.userType&&(i=!0)},error:function(e,t){}}),i)){var s="";dojo.xhrGet({url:getAbsoluteURL()+"BPSAJAXGetShoppingListView",handleAs:"json",sync:!0,content:{storeId:WCParamJS.storeId},load:function(e){if(null!=e&&void 0!=e){for(var i=0;i<e.length;i++)if(void 0!=e[i].uniqueID&&void 0!==e[i].isSaveForLater&&"true"!==e[i].isSaveForLater){var o=t+"ShoppingList_"+e[i].uniqueID;if(null==dojo.byId(o)){var a=dojo.byId(t+"listOfShoppingLists"),r=dojo.byId(t+"ShoppingList_dummyShoppingList").outerHTML.replace(/dummyShoppingList/g,e[i].uniqueID);r=r.replace("dummySLValue",e[i].description);var d=document.createElement("div");a.appendChild(d),d.outerHTML=r,s=0==i?"'"+e[i].description+"':1":s+",''"+e[i].description+"':1"}}dojo.byId(t+"ShoppingList_dummyShoppingList").style.display="none",dojo.byId(t+"registeredWishListDropDown").style.display="",dojo.byId(t+"signInMsg").style.display="none"}},error:function(e,t){console.debug("error")}}),dojo.byId(t+"ShoppingList_0").style.display="none",dojo.byId(this.pageName+"shoppingListNames").value="{"+s+"}",this.shoppingListNames="{"+s+"}"}var o=dojo.query(".widget_quick_info_popup .content_right_border")[0],a=dojo.position(o).h;if(dojo.byId(t+"shoppingListDropDown").style.display="",this.dropDownVisible=!0,dojo.query("#"+t+"shoppingListDropDown.dropdown_list div").removeClass("focused"),dojo.byId("quickInfoRefreshArea")&&dojo.byId("QuickInfoshoppingListDropDown")){var r=dojo.position(dojo.byId("quickInfoRefreshArea")).h,d=dojo.position(dojo.byId("QuickInfoshoppingListDropDown")).h,n=dojo.position(o).h;if(r+d>n){var l=dijit.byId("quickInfoPopup");dojo.style(o,"height",n+d+"px"),l.resize(),a<n&&(dojo.style(o,"height",a+d+"px"),l.resize())}}this.dropDownOpen=!0}else this.hideDropDown()},this.showPopup=function(e,t){null!=t&&(this.chartItemId=t),dojo.byId("grayOut").style.display="block",this.hideDropDown(),this.clearPopupText();var i=dijit.byId(this.pageName+e+"ShoppingListPopup"),s=null;null!=i&&"undefined"!=i||(s=dojo.byId("chartcompserwishlistName").value,null!=(i=dijit.byId(s+e+"ShoppingListPopup"))&&"undefined"!=i||(i=dijit.byId(e+"ShoppingListPopup")));this.hideErrorMessage(),this.hideEditErrorMessage(),null!=i?(i.closeButtonNode.style.display="none",closeAllDialogs(),setTimeout(function(){i.show()},250),"create"==e?null!=dojo.byId(this.pageName+"newListName")?dojo.byId(this.pageName+"newListName").focus():null!=dojo.byId(s+"newListName")?dojo.byId(s+"newListName").focus():dojo.byId("newListName").focus():"edit"==e&&dojo.byId("editListName").focus()):console.debug(e+"ShoppingListPopup does not exist")},this.showSuccessDialog=function(){var e=dijit.byId(this.pageName+"shoppingListCreateSuccessPopup");null!=e&&""!=this.actionBeingPerformed&&(dojo.byId(this.pageName+"successMessageAreaText").innerHTML=storeNLS.LIST_CREATED,e.closeButtonNode.style.display="none",e.show(),dojo.byId("grayOut").style.display="block",this.actionBeingPerformed="")},this.showMessageDialog=function(e){var t=dijit.byId(this.pageName+"shoppingListCreateSuccessPopup");null!=t&&(dojo.byId(this.pageName+"successMessageAreaText").innerHTML=e,t.closeButtonNode.style.display="none",t.show())},this.showErrorMessage=function(e){document.getElementById(this.pageName+"shoppingListErrorMessageArea")&&document.getElementById(this.pageName+"shoppingListErrorMessageText")&&(document.getElementById(this.pageName+"shoppingListErrorMessageText").innerHTML=e,document.getElementById(this.pageName+"shoppingListErrorMessageArea").style.display="block")},this.hideErrorMessage=function(){document.getElementById(this.pageName+"shoppingListErrorMessageArea")&&document.getElementById(this.pageName+"shoppingListErrorMessageText")&&(document.getElementById(this.pageName+"shoppingListErrorMessageText").innerHTML="",document.getElementById(this.pageName+"shoppingListErrorMessageArea").style.display="none")},this.showEditErrorMessage=function(e){document.getElementById("editShoppingListErrorMessageArea")&&document.getElementById("editShoppingListErrorMessageText")&&(document.getElementById("editShoppingListErrorMessageText").innerHTML=e,document.getElementById("editShoppingListErrorMessageArea").style.display="block")},this.hideEditErrorMessage=function(){document.getElementById("editShoppingListErrorMessageArea")&&document.getElementById("editShoppingListErrorMessageText")&&(document.getElementById("editShoppingListErrorMessageText").innerHTML="",document.getElementById("editShoppingListErrorMessageArea").style.display="none")},this.create=function(){var e=trim(dojo.byId(this.pageName+"newListName").value),t=dojo.byId(this.pageName+"newListName").maxLength,i=storeNLS.DEFAULT_WISH_LIST_NAME;if(this.empty(e))this.showErrorMessage(storeNLS.ERR_NAME_EMPTY);else if(MessageHelper.isValidUTF8length(e,t))if(e==i||e.toLowerCase()==i.toLowerCase())this.showErrorMessage(storeNLS.ERR_NAME_SHOPPING_LIST);else if(e.toLowerCase()==storeNLS.SAVE_FOR_LATER.toLowerCase())this.showErrorMessage(storeNLS.ERR_NAME_SAVE_FOR_LATER);else if(this.isDuplicate(e))this.showErrorMessage(storeNLS.ERR_NAME_DUPLICATE);else if(this.validateWishName(e)){var s=this.setCommonParams();s.name=e;var o=dijit.byId(this.pageName+"createShoppingListPopup");if(null!=o&&o.hide(),!submitRequest())return;cursor_wait(),wc.service.invoke("ShoppingListServiceCreate",s),this.actionBeingPerformed="create"}else this.showErrorMessage(storeNLS.INVALID_NAME_SHOPPING_LIST);else this.showErrorMessage(storeNLS.ERR_NAME_TOOLONG)},this.createDefaultListAndAddItem=function(e,t,i,s,o,a,r){if(dojo.byId("add2CartUnavailableBtn")&&"inline-block"==dojo.byId("add2CartUnavailableBtn").style.display)MessageHelper.displayErrorMessage(storeNLS.ERR_RESOLVING_WISHLIST_SKU);else{dojo.byId("grayOut").style.display="block",t&&""!=t&&(this.orderItemId=t);var d="",n=[];if(""==this.skuNum)if(analyticsDataLayer.childSKUs&&1==analyticsDataLayer.childSKUs.length)d=analyticsDataLayer.childSKUs[0];else if("undefined"!=typeof shoppingListJS&&byId("product_SKU_"+shoppingListJS.catEntryParams.id))d="undefined"!=typeof shoppingListJS&&byId("product_SKU_"+shoppingListJS.catEntryParams.id)?byId("product_SKU_"+shoppingListJS.catEntryParams.id).innerText.split(" ")[1]:"";else if(byId("cat_Subcat_JSON")){JSON.parse(byId("cat_Subcat_JSON").value);for(var l=0;l<analyticsDataLayer.cartContents.length;l++)if(t==analyticsDataLayer.cartContents[l].orderItemId){n.push(analyticsDataLayer.order.tm_Cart_Array[l]);break}}else d="";else d=this.skuNum;if(dojo.byId("analyticsWishlist_sku_tm_Sku_Id")&&(dojo.byId("analyticsWishlist_sku_tm_Sku_Id").value=d),"-1"==e){var c=this.setCommonParams();if(void 0===s?c.name=storeNLS.DEFAULT_WISH_LIST_NAME:void 0!==s&&""!=s&&void 0!==o&&""!=o&&void 0!==a&&""!=a&&void 0!==r&&""!=r&&(c.name=s,c.wishListName=s,c.orderItemSlot=o,c.productDesc=a,c.numberOfOrderItems=r),!submitRequest())return;cursor_wait(),this.addItemAfterCreate=!0,wc.service.invoke("ShoppingListServiceCreate",c)}else t&&""!=t?(void 0!==s&&""!=s&&void 0!==o&&""!=o&&void 0!==a&&""!=a&&void 0!==r&&""!=r?this.addToListAndDelete(e,t,i,s,o,a,r):this.addToListAndDelete(e,t,i),updateEventAnalytics("saveForLater","product",n,"")):this.addToList(e,i)}},this.addToList=function(e,t){if(this.hideDropDown(),dojo.byId("add2CartUnavailableBtn")&&"inline-block"==dojo.byId("add2CartUnavailableBtn").style.display)MessageHelper.displayErrorMessage(storeNLS.ERR_RESOLVING_WISHLIST_SKU);else{var i=this.setCommonParams();i.giftListId=e;var s=this.catEntryParams.id;if("itembean"==this.catEntryParams.type.toLowerCase()||"packagebean"==this.catEntryParams.type.toLowerCase()||"preddynakitbean"==this.catEntryParams.type.toLowerCase()||"dynamickitbean"==this.catEntryParams.type.toLowerCase())updateParamObject(i,"catEntryId",this.catEntryParams.id,!1,-1),updateParamObject(i,"quantity",this.catEntryParams.quantity,!1,-1);else if("bundlebean"==this.catEntryParams.type.toLowerCase()){var o=!0;for(baseItemId in this.catEntryParams.components)if(this.catEntryParams.components[baseItemId].skus&&this.catEntryParams.components[baseItemId].skus.length>1){var a=this.catEntryParams.components[baseItemId].resolved;if(null==a||"undefined"==a||0==a){o=!1;break}}if(!o)return void MessageHelper.displayErrorMessage(storeNLS.ERR_RESOLVING_WISHLIST_SKU);for(baseItemId in this.catEntryParams.components)updateParamObject(i,"catEntryId",this.catEntryParams.components[baseItemId].id,!1,-1),updateParamObject(i,"quantity",this.catEntryParams.components[baseItemId].quantity,!1,-1)}else{var r=this.itemId;if(-1!=r&&void 0!==t&&r!=t)if(/^\d+$/.test(t))r=t;else{var d=t.match(/\d+/);null!=d&&null!=d[0]&&(r=d[0])}if(-1==r&&-1==(r=this.resolveSKU())){if(null!=t){var n=t.match(/\d+/g);null!=n&&null!=n[0]&&(r=n[0])}}if(dojo.byId("analyticsWishlist_sku_tm_Sku_Id")&&(dojo.byId("analyticsWishlist_sku_tm_Sku_Id").value=r),-1==r)return void MessageHelper.displayErrorMessage(storeNLS.ERR_RESOLVING_WISHLIST_SKU);s=r,updateParamObject(i,"catEntryId",r,!1,-1),updateParamObject(i,"quantity",this.catEntryParams.quantity,!1,-1)}"shoppingListJS"!=this.jsObjectName&&0!=this.jsObjectName.indexOf("shoppingListJS")&&QuickInfoJS.close(),submitRequest()&&(cursor_wait(),ShoppingListDialogJS.setDialogParams(this.storeParams,{catEntryId:s,thumbnail:"imgPath",focusElement:t}),wc.service.invoke("ShoppingListServiceAddItem",i),i.giftListState="Default",wc.service.invoke("AjaxGiftListServiceChangeGiftListStatus",i))}},this.isDuplicate=function(e){e=this.escapeXml(e,!0);return 1==this.shoppingListNames[e.toUpperCase()]},this.updateDefaultListId=function(e){this.shoppingListNames[storeNLS.DEFAULT_WISH_LIST_NAME]=1,dojo.byId(this.pageName+"addToShoppingList")&&(dojo.byId(this.pageName+"addToShoppingList").href="javascript:"+this.jsObjectName+".createDefaultListAndAddItem("+e+");")},this.updateShoppingList=function(e,t,i){var s=this.escapeXml(t,!1);if(this.shoppingListNames[s.toUpperCase()]=1,!i||"edit"!=i&&"delete"!=i||(this.shoppingListNames[this.nameToDelete.toUpperCase()]=-1),dojo.byId(this.pageName+"ShoppingListDivider")){var o="javascript: this.className = 'created_list';";if(-1==this.pageName.indexOf("OI"))dojo.place('<div role="menuitem" id="'+this.pageName+"ShoppingList_"+e+'" class="created_list" onfocus="javascript:'+jsObjectName+".focusList('"+e+'\'); "  onblur="'+o+'" onclick="javascript:'+jsObjectName+".addToList('"+e+'\');"><a role="menuitem" id="'+this.pageName+"ShoppingListLink_"+e+'" href="javascript:'+jsObjectName+".addToList('"+e+'\');" onfocus="javascript:'+jsObjectName+".focusListLink('"+e+"');\">"+t+"</a></div>",this.pageName+"ShoppingListDivider","before");else{var a=this.pageName.replace("OI","");dojo.place('<div role="menuitem" id="'+this.pageName+"ShoppingList_"+e+'" class="created_list" onfocus="javascript:'+jsObjectName+".focusList('"+e+'\'); "  onblur="'+o+'" onclick="javascript:'+jsObjectName+".addToListAndDelete('"+e+"','"+a+'\');"><a role="menuitem" id="'+this.pageName+"ShoppingListLink_"+e+'" href="javascript:'+jsObjectName+".addToListAndDelete('"+e+"','"+a+'\');" onfocus="javascript:'+jsObjectName+".focusListLink('"+e+"');\">"+t+"</a></div>",this.pageName+"ShoppingListDivider","before")}}else if(-1!=this.chartItemId){o="javascript: this.className = 'created_list';";dojo.place('<div role="menuitem" id="'+this.chartItemId+"ShoppingList_"+e+'" class="created_list" onfocus="javascript:'+jsObjectName+".focusList('"+e+'\'); "  onblur="'+o+'" onclick="javascript:'+jsObjectName+".addToList('"+e+"', '"+this.chartItemId+'\');"><a role="menuitem" id="'+this.chartItemId+"ShoppingListLink_"+e+'" href="javascript:'+jsObjectName+".addToList('"+e+"', '"+this.chartItemId+'\');" onfocus="javascript:'+jsObjectName+".focusListLink('"+e+"');\">"+t+"</a></div>",this.chartItemId+"ShoppingListDivider","before")}},this.clearPopupText=function(){if(null!=dojo.byId(this.pageName+"newListName"))dojo.byId(this.pageName+"newListName").value="";else{var e=dojo.byId("chartcompserwishlistName");if(null!=e){var t=e.value;null!=dojo.byId(t+"newListName")?dojo.byId(t+"newListName").value="":dojo.byId("newListName").value=""}else dojo.byId("newListName").value=""}},this.escapeXml=function(e,t){return t&&(e=e.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;")),e=e.replace(/"/gm,"&#034;").replace(/'/gm,"&#039;")},this.resolveSKU=function(){if(1==this.catEntryParams.skus.length)return this.catEntryParams.skus[0].id;for(idx=0;idx<this.catEntryParams.skus.length;idx++){var e=0,t=0;for(attribute in this.catEntryParams.skus[idx].attributes){if(t++,!this.catEntryParams.attributes||this.catEntryParams.skus[idx].attributes[attribute]!=this.catEntryParams.attributes[attribute])break;e++}if(0!=e&&e==t)return this.catEntryParams.skus[idx].id}return-1},this.setCommonParams=function(){var e={};return e.storeId=this.storeParams.storeId,e.catalogId=this.storeParams.catalogId,e.langId=this.storeParams.langId,e},this.empty=function(e){return null==e||void 0==e||""==e},this.redirectToSignOn=function(){var e=dojo.coords(dojo.byId("ShopCartPagingDisplay")).w,t=document.location.href;if(-1!=t.lastIndexOf("s",4))var i=t;else i=t.substring(0,4)+"s"+t.substring(4);if(i.indexOf("?")>-1)var s=i+"&";else s=i+"?";setCookie("WC_DisplaySignInPanel_"+WCParamJS.storeId,"true",{path:"/",domain:cookieDomain});var o=location.href;1==isGuest&&(o=getAbsoluteURL()+"RESTMoveOrderItem?continue=1&createIfEmpty=1&updatePrices=0&deleteIfEmpty=*&fromOrderId=*&toOrderId=.&page=&calculationUsageId=-1&URL="+encodeURIComponent("RESTOrderCalculate?URL="+encodeURIComponent(o))),document.location.href=e<600?getAbsoluteURL()+"AjaxLogonForm?myAcctMain=1&storeId="+this.storeParams.storeId+"&catalogId="+this.storeParams.catalogId+"&langId="+this.storeParams.langId:s+"myAcctMain=1&storeId="+this.storeParams.storeId+"&catalogId="+this.storeParams.catalogId+"&langId="+this.storeParams.langId+"&URL="+encodeURIComponent(o)},this.redirectToLogonRegisterPage=function(e){if(document.getElementById("PDPLayoutName")){var t;t=document.location.href,window.localStorage.removeItem("urlOnWishlistSignIn"),window.localStorage.setItem("urlOnWishlistSignIn",t)}e=e+"&pageFrom=fromPDP&URL="+document.location.href,document.location.href=e},this.focusList=function(e){this.focusListByElementId(this.pageName+"ShoppingList_"+e)},this.focusListByElementId=function(e){dojo.hasClass(e,"focused")||dojo.byId(e.replace("ShoppingList","ShoppingListLink")).focus()},this.focusListLink=function(e,t){null!=dojo.query("#"+this.pageName+"shoppingListDropDown.dropdown_list div")&&dojo.query("#"+this.pageName+"shoppingListDropDown.dropdown_list div").removeClass("focused"),"undefined"!=dojo.byId(this.pageName+"ShoppingList_"+e)&&null!=dojo.byId(this.pageName+"ShoppingList_"+e)&&dojo.addClass(this.pageName+"ShoppingList_"+e,"focused")},this.updateShoppingListAndAddItem=function(e){e.listName==storeNLS.DEFAULT_WISH_LIST_NAME?this.updateDefaultListId(e.listId):this.updateShoppingList(e.listId,e.listName,e.action),this.addItemAfterCreate?(this.addItemAfterCreate=!1,""!=this.orderItemId?void 0!==e.wishListName&&void 0!==e.orderItemSlot&&void 0!==e.productDesc&&void 0!==e.numberOfOrderItems&&""!=e.wishListName&&""!=e.orderItemSlot&&""!=e.productDesc&&""!=e.numberOfOrderItems?this.addToListAndDelete(e.listId,this.orderItemId,void 0,e.wishListName,e.orderItemSlot,e.productDesc,e.numberOfOrderItems):this.addToListAndDelete(e.listId,this.orderItemId):this.addToList(e.listId)):("add"==e.action&&(cursor_wait(),this.showSuccessDialog(),cursor_wait()),"edit"==e.action&&cursor_wait(),"delete"==e.action&&cursor_wait())},this.navigateDropDown=function(e){var t=this;if(e.keyCode==dojo.keys.UP_ARROW){dojo.stopEvent(e);var i=!1;dojo.query("#"+t.pageName+"shoppingListDropDown.dropdown_list div.created_list").forEach(function(e,s,o){!i&&dojo.hasClass(e,"focused")&&(0==s?t.focusListByElementId(o[o.length-1].id):t.focusListByElementId(o[s-1].id),i=!0)})}else if(e.keyCode==dojo.keys.DOWN_ARROW){dojo.stopEvent(e);i=!1;dojo.query("#"+t.pageName+"shoppingListDropDown.dropdown_list div.created_list").forEach(function(e,s,o){!i&&dojo.hasClass(e,"focused")&&(o.length-1==s?t.focusListByElementId(o[0].id):t.focusListByElementId(o[s+1].id),i=!0)})}else e.keyCode!=dojo.keys.ESCAPE&&e.keyCode!=dojo.keys.TAB||(dojo.stopEvent(e),this.hideDropDown())},this.hideIfNoFocus=function(){!this.dropDownVisible||this.dropDownInFocus||this.mouseOnArrow||this.hideDropDown()},this.hasFocus=function(e){dojo.mouseButtons.isRight(e)?this.dropDownInFocus=!1:this.dropDownInFocus=!0},this.edit=function(){var e=trim(dojo.byId("editListName").value),t=e.maxLength,i=storeNLS.DEFAULT_WISH_LIST_NAME;if(this.empty(e))this.showEditErrorMessage(storeNLS.ERR_NAME_EMPTY);else if(MessageHelper.isValidUTF8length(e,t))if(e==i)this.showEditErrorMessage(storeNLS.ERR_NAME_SHOPPING_LIST);else if(e.toLowerCase()==storeNLS.SAVE_FOR_LATER.toLowerCase())this.showEditErrorMessage(storeNLS.ERR_NAME_SAVE_FOR_LATER);else if(this.validateWishName(e)){var s=this.setCommonParams();s.name=e;var o=dojo.byId("multipleWishlistController_select");if(null!=o&&"undefined"!=o&&0!=o.value&&(s.giftListId=dojo.byId("multipleWishlistController_select").value,this.nameToDelete=dojo.byId("multipleWishlistController_select").options[o.selectedIndex].text),this.nameToDelete.toUpperCase()!=e.toUpperCase()&&this.isDuplicate(e))return void this.showEditErrorMessage(storeNLS.ERR_NAME_DUPLICATE);var a=dijit.byId("editShoppingListPopup");if(null!=a&&a.hide(),!submitRequest())return;cursor_wait(),wc.service.invoke("ShoppingListServiceUpdate",s)}else this.showEditErrorMessage(storeNLS.INVALID_NAME_SHOPPING_LIST);else this.showEditErrorMessage(storeNLS.ERR_NAME_TOOLONG)},this.deleteList=function(){var e=this.setCommonParams(),t=dojo.byId("multipleWishlistController_select");null!=t&&"undefined"!=t&&0!=t.value&&(e.giftListId=dojo.byId("multipleWishlistController_select").value,this.nameToDelete=dojo.byId("multipleWishlistController_select").options[t.selectedIndex].text);var i=dijit.byId("deleteShoppingListPopup");null!=i&&i.hide(),submitRequest()&&(cursor_wait(),wc.service.invoke("ShoppingListServiceDelete",e))},this.refreshLinkState=function(){var e=dojo.byId("multipleWishlistController_select");null!=e&&(dojo.byId("multipleWishlistController_select").options[e.selectedIndex].text==storeNLS.DEFAULT_WISH_LIST_NAME?(dojo.byId("editDivider").style.display="none",dojo.byId("edit_popup_link").style.display="none",dojo.byId("deleteDivider").style.display="none",dojo.byId("delete_popup_link").style.display="none"):(dojo.byId("editDivider").style.display="block",dojo.byId("edit_popup_link").style.display="block",dojo.byId("deleteDivider").style.display="block",dojo.byId("delete_popup_link").style.display="block"))},this.addToListAndDelete=function(e,t,i,s,o,a,r){this.orderItemId=t,dojo.publish("modelChanged/AnalyticsConversionEvent"),this.hideDropDown();var d=this.setCommonParams();d.giftListId=e,d.catEntryId_1=this.catEntryParams.id,d.quantity_1=1,submitRequest()&&(cursor_wait(),void 0!==s&&""!=s?ShoppingListDialogJS.setDialogParams(this.storeParams,{catEntryId:this.catEntryParams.id,name:this.catEntryParams.name,image:this.catEntryParams.image,thumbnail:"imgPath",focusElement:i,wishListName:s}):ShoppingListDialogJS.setDialogParams(this.storeParams,{catEntryId:this.catEntryParams.id,name:this.catEntryParams.name,image:this.catEntryParams.image,thumbnail:"imgPath",focusElement:i}),void 0!==s&&""!=s&&void 0!==o&&""!=o&&void 0!==a&&""!=a&&void 0!==r&&""!=r&&(d.wishListName=s,d.orderItemSlot=o,d.productDesc=a,d.numberOfOrderItems=r),wc.service.invoke("ShoppingListServiceAddItemAndRemoveFromCart",d))},this.deleteItemFromCart=function(e){if(""!=this.orderItemId){var t=this.orderItemId;this.orderItemId="",""!=t&&(void 0!==e&&void 0!==e.wishListName&&void 0!==e.orderItemSlot&&void 0!==e.productDesc&&void 0!==e.numberOfOrderItems&&""!=e.wishListName&&""!=e.orderItemSlot&&""!=e.productDesc&&""!=e.numberOfOrderItems?CheckoutHelperJS.deleteFromCart(t,e.orderItemSlot,e.productDesc,e.numberOfOrderItems,void 0,e.wishListName):CheckoutHelperJS.deleteFromCart(t,!0))}},this.validateWishName=function(e){var t="~!@#$%^&*()+=[]{};:,<>?/|`";t+="\t'\"\\/";for(var i=0;i<e.length;i++)if(t.indexOf(e.substring(i,i+1))>=0)return!1;return!0},this.setResolved=function(e,t){this.catEntryParams.components[e].resolved=t},dojo.connect(document.documentElement,"onmousedown",this,"hideIfNoFocus"),this.catEntryParams.components)dojo.topic.subscribe("DefiningAttributes_Resolved_"+baseItemId,function(catEntryId,productId){eval(jsObjectName+".setResolved('"+productId+"', true)")}),dojo.topic.subscribe("DefiningAttributes_Changed_"+baseItemId,function(catEntryId,productId){0==catEntryId&&eval(jsObjectName+".setResolved('"+productId+"', false)")});this.setSkuNumForWishlist=function(e){this.skuNum=e}}setTimeout(function(){if(document.getElementById("WishlistDisplay_Widget")){for(var e=document.querySelectorAll("#multipleWishlistController_link_create, #multipleWishlistController_link_edit, #multipleWishlistController_link_delete"),t=document.querySelectorAll("#shoppingListCreateSuccessPopup_continue_shopping, #shoppingListCreateSuccessPopup_close, #deleteShoppingListPopup_cancel, #editShoppingListPopup_cancel, #createShoppingListPopup_cancel, #createShoppingListPopup_close, #editShoppingListPopup_close, #deleteShoppingListPopup_close"),i=0;i<e.length;i++)e[i].addEventListener("click",function(){disableBodyScroll()});for(i=0;i<t.length;i++)t[i].addEventListener("click",function(){restoreBodyScroll()})}},1e3),"undefined"!=typeof ShoppingListDialogJS&&null!=ShoppingListDialogJS&&ShoppingListDialogJS||(ShoppingListDialogJS={storeParams:null,dialogParams:null,setDialogParams:function(e,t){this.storeParams=e,this.dialogParams=t,null==this.dialogParams.image||""==this.dialogParams.image?this.fetchAddedItem():this.displayItemAddedWithoutFetching()},fetchAddedItem:function(){var e=this.setCommonParams();e.productId=this.dialogParams.catEntryId,e.catalogEntryId=this.dialogParams.catEntryId,dojo.xhrPost({url:getAbsoluteURL()+"GetCatalogEntryDetailsByIDView",handleAs:"json-comment-filtered",content:e,service:this,load:ShoppingListDialogJS.displayItemAddedDialog,error:function(e,t){console.debug("QuickInfoJS.selectItem: Unexpected error occurred during an xhrPost request.")}})},displayItemAddedDialog:function(e,t){if(null!=e&&null!=e.catalogEntry){var i="";null!=e.catalogEntry.catalogEntryIdentifier&&null!=e.catalogEntry.catalogEntryIdentifier.externalIdentifier&&(i=e.catalogEntry.catalogEntryIdentifier.externalIdentifier.partNumber),dojo.byId("analyticsWishlist_sku_unitPrice")&&(null!=e.catalogEntry.listPrice&&void 0!=e.catalogEntry.listPrice&&""!=e.catalogEntry.listPrice?dojo.byId("analyticsWishlist_sku_unitPrice").value=e.catalogEntry.listPrice.replace(/\$/g,""):null!=e.catalogEntry.offerPrice&&void 0!=e.catalogEntry.offerPrice&&""!=e.catalogEntry.offerPrice&&(dojo.byId("analyticsWishlist_sku_unitPrice").value=e.catalogEntry.offerPrice.replace(/\$/g,""))),dojo.byId("analyticsWishlist_sku_retailPrice")&&null!=e.catalogEntry.offerPrice&&void 0!=e.catalogEntry.offerPrice&&""!=e.catalogEntry.offerPrice&&(dojo.byId("analyticsWishlist_sku_retailPrice").value=e.catalogEntry.offerPrice.replace(/\$/g,"")),dojo.byId("analyticsWishlist_sku_tm_Sku_Id")&&null!=i&&void 0!=i&&""!=i&&(dojo.byId("analyticsWishlist_sku_tm_Sku_Id").value=i,setTimeout(function(){updateEventAnalytics("addToWishlist","product",[{tm_Sku_Id:i}],"")},1e3))}null!=dijit.byId("shoppingListItemAddedPopup")?(dojo.byId("shoppingListItemAddedImg").src=e.catalogEntry.description[0].thumbnail.replace("160x160","105x105"),dojo.byId("shoppingListItemAddedImg").alt=e.catalogEntry.description[0].name,dojo.byId("shoppingListItemAddedName").innerHTML=e.catalogEntry.description[0].name):console.debug("shoppingListItemAddedPopup does not exist"),cursor_clear(),showElementById("grayOut")},displayItemAddedWithoutFetching:function(){null!=dijit.byId("shoppingListItemAddedPopup")?(dojo.byId("shoppingListItemAddedImg").src=this.dialogParams.image,dojo.byId("shoppingListItemAddedImg").alt=this.dialogParams.name,dojo.byId("shoppingListItemAddedName").innerHTML=this.dialogParams.name):console.debug("shoppingListItemAddedPopup does not exist"),cursor_clear(),showElementById("grayOut")},showDialog:function(){var e=dijit.byId("shoppingListItemAddedPopup");null!=e?(e.closeButtonNode.style.display="none",void 0!==ShoppingListDialogJS.dialogParams.wishListName&&ShoppingListDialogJS.dialogParams.wishListName==storeNLS.SAVE_FOR_LATER||e.show()):console.debug("shoppingListItemAddedPopup does not exist")},setCommonParams:function(){var e=new Object;return e.storeId=this.storeParams.storeId,e.catalogId=this.storeParams.catalogId,e.langId=this.storeParams.langId,e},close:function(){dijit.byId("shoppingListItemAddedPopup").hide(),cursor_clear(),hideElementById("grayOut"),this.dialogParams.focusElement&&""!=this.dialogParams.focusElement&&null!=dojo.byId(this.dialogParams.focusElement)&&"undefined"!=dojo.byId(this.dialogParams.focusElement)&&dojo.byId(this.dialogParams.focusElement).focus()}},dojo.topic.subscribe("ShoppingListItem_Added",ShoppingListDialogJS.showDialog));