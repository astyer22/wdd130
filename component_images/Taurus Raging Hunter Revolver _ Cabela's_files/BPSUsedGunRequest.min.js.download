BPSUsedGunRequestJS={redirectURL:getAbsoluteURL()+"FirearmRequestConfirmation",firearmRequestViewName:"FirearmRequestView",prepareSubmit:function(e,r){if(cursor_wait(),byId("usedGun_errorUnavailable")&&hideElementById("usedGun_errorUnavailable"),""==byId("used_gun_request_details_textarea").value)return MessageHelper.formErrorHandleClient("used_gun_request_details_textarea",MessageHelper.messages.ERROR_InquiryEmpty,"below",e.id),void cursor_clear();AddressHelper.validateAddressForm(e,r)&&this.validateAddress(e,r)?this.sendUsedGunStoreEmail(e,r):cursor_clear()},sendUsedGunStoreEmail:function(e,r){var a=this.buildUsedGunStoreEmailParameters(e,r);dojo.xhrPost({url:getAbsoluteURL()+"BPSUsedGunsStoreEmail",handleAs:"json-comment-filtered",content:a,load:function(a,s){if("0"===a.statusCode){BPSUsedGunRequestJS.clearRequestForm(e,r);var t=BPSUsedGunRequestJS.redirectURL+"?storeId="+WCParamJS.storeId+"&catalogId="+WCParamJS.catalogId+"&langId="+WCParamJS.langId+"&productId="+e[r+"parentProductId"].value;document.location.href=appendWcCommonRequestParameters(t)}else cursor_clear(),byId("usedGun_errorUnavailable")&&showElementById("usedGun_errorUnavailable")},error:function(e,r){cursor_clear(),byId("usedGun_errorUnavailable")&&showElementById("usedGun_errorUnavailable")}})},clearRequestForm:function(e,r){e[r+"firstName"].value="",e[r+"lastName"].value="",e[r+"email1"].value="",e[r+"phone1"].value="",e[r+"address1"].value="",e[r+"address2"].value="",e[r+"city"].value="",e[r+"country"].value="US",AddressHelper.loadStatesUI(e.name,r,"bpsUsedGunRequest_stateDiv","WC_UsedGunRequestForm_AddressEntryForm_FormInput_bpsUsedGunRequest_state_1"),e[r+"zipCode"].value="",dojo.byId("used_gun_request_details_textarea").value=""},buildUsedGunStoreEmailParameters:function(e,r){var a={};a.customerFirstName=e[r+"firstName"].value,a.customerLastName=e[r+"lastName"].value,a.customerEmail=e[r+"email1"].value.toLowerCase(),a.customerPhone=formatPhoneNumber(e[r+"phone1"].value,"US"),a.customerStreetAddress1=e[r+"address1"].value;var s=" ";return""!=e[r+"address2"].value&&(s=e[r+"address2"].value),a.customerStreetAddress2=s,a.customerCity=e[r+"city"].value,a.customerState=e[r+"state"].value,a.customerCountry=e[r+"country"].value,a.customerZIP=e[r+"zipCode"].value,a.storeEmail=e[r+"ProductDetails_STOREEMAIL"].value,a.storeLocation=e[r+"ProductDetails_STORE"].value,a.storePhone=e[r+"ProductDetails_STORE_PHONE"].value,a.firearmSKU=e[r+"ProductDetails_SKU"].value,a.firearmMake=e[r+"ProductDetails_MAKE"].value,a.firearmModel=e[r+"ProductDetails_MODEL"].value,a.firearmCartridge=e[r+"ProductDetails_GAUGE"].value,a.additionalComments=dojo.byId("used_gun_request_details_textarea").value,a.customerPhone=a.customerPhone.replace("(","%28"),a.customerPhone=a.customerPhone.replace(")","%29"),a.storePhone=a.storePhone.replace("(","%28"),a.storePhone=a.storePhone.replace(")","%29"),a},validateAddress:function(e,r){null==r&&(r="");var a=r+"address1",s=r+"address2",t=r+"city",o=r+"state",d=r+"country",u=r+"zipCode";if("true"==e.qasSwitch.value||"US"!=e[d].value&&"CA"!=e[d].value)MyAccountDisplay.useOriginalAddress(e);else{var l={};l.storeId=WCParamJS.storeId,l.langId=WCParamJS.langId,l.catalogId=WCParamJS.catalogId,l.searchAddress1=e[a].value,l.searchAddress2=e[s].value,l.searchCity=e[t].value,l.searchProvince=e[o].value,l.searchCountry=e[d].value,l.searchPostcode=e[u].value,l.formId=e.attributes.id.value,l.URL="AddressValidateJSON",l.errorViewName="AddressValidateJSON",l.prefix=r,cursor_wait(),dojo.xhrPost({url:"ProcessAddress",handleAs:"json-comment-filtered",timeout:1e3*QAS_ADDRESS_VALIDATION_TIME_OUT_SECONDS,content:l,load:MyAccountDisplay.processAddrValidationResp,error:function(r,a){MyAccountDisplay.useOriginalAddress(e),cursor_clear()}})}},firearmContact:function(e,r){var a=this.firearmRequestViewName;void 0!=r&&""!=r&&(a=r);var s=a+"?productId="+e;document.location.href=appendWcCommonRequestParameters(s)},firearmStoreDetails:function(e,r,a,s,t,o,d,u){if(dojo.byId(e)){var l="";l+='<div class="store_locator_Branch_name_location">'+u+"</div>",l+='<div class="store_locator_add">'+r+"</div>",l+='<div class="store_locator_add">'+a+", "+s+" "+t+"</div>",l+='<a class="call_store" href="tel:'+o+'">'+formatPhoneNumber(o,d)+"</a>",dojo.byId(e).innerHTML=l}}};